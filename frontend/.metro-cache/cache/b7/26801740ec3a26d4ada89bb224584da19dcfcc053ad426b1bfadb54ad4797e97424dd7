{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":54,"index":144}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"../services/syncService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":145},"end":{"line":3,"column":54,"index":199}}],"key":"joJd5R6pPIG9/TZe5fTFFjaC2zk=","exportNames":["*"],"imports":1}},{"name":"../services/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":200},"end":{"line":4,"column":53,"index":253}}],"key":"zqGJUMQQZwIry90rqgd1gunX3aI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/NetworkContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"NetworkProvider\", {\n    enumerable: true,\n    get: function () {\n      return NetworkProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useNetwork\", {\n    enumerable: true,\n    get: function () {\n      return useNetwork;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[1], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _servicesSyncService = require(_dependencyMap[2], \"../services/syncService\");\n  var _servicesStorage = require(_dependencyMap[3], \"../services/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const NetworkContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const NetworkProvider = ({\n    children\n  }) => {\n    const [isConnected, setIsConnected] = (0, _react.useState)(true);\n    const [pendingSync, setPendingSync] = (0, _react.useState)(0);\n    (0, _react.useEffect)(() => {\n      // Listen to network changes\n      const unsubscribe = NetInfo.default.addEventListener(state => {\n        setIsConnected(state.isConnected ?? false);\n\n        // Auto-sync when coming online\n        if (state.isConnected && !isConnected) {\n          syncNow();\n        }\n      });\n\n      // Start auto-sync\n      const syncInterval = _servicesSyncService.syncService.startAutoSync(2);\n\n      // Update pending count\n      updatePendingCount();\n      const countInterval = setInterval(updatePendingCount, 30000); // Check every 30s\n\n      return () => {\n        unsubscribe();\n        clearInterval(syncInterval);\n        clearInterval(countInterval);\n      };\n    }, []);\n    const updatePendingCount = async () => {\n      const locations = await _servicesStorage.storageService.getPendingLocations();\n      const messages = await _servicesStorage.storageService.getPendingMessages();\n      const respondents = await _servicesStorage.storageService.getPendingRespondents();\n      setPendingSync(locations.length + messages.length + respondents.length);\n    };\n    const syncNow = async () => {\n      await _servicesSyncService.syncService.syncAll();\n      await updatePendingCount();\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NetworkContext.Provider, {\n      value: {\n        isConnected,\n        isOnline: isConnected,\n        pendingSync,\n        syncNow\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this);\n  };\n  const useNetwork = () => {\n    const context = (0, _react.useContext)(NetworkContext);\n    if (context === undefined) {\n      throw new Error('useNetwork must be used within a NetworkProvider');\n    }\n    return context;\n  };\n});","lineCount":92,"map":[[13,2,15,0,"Object"],[13,8,15,0],[13,9,15,0,"defineProperty"],[13,23,15,0],[13,24,15,0,"exports"],[13,31,15,0],[14,4,15,0,"enumerable"],[14,14,15,0],[15,4,15,0,"get"],[15,7,15,0],[15,18,15,0,"get"],[15,19,15,0],[16,6,15,0],[16,13,15,0,"NetworkProvider"],[16,28,15,0],[17,4,15,0],[18,2,15,0],[19,2,70,0,"Object"],[19,8,70,0],[19,9,70,0,"defineProperty"],[19,23,70,0],[19,24,70,0,"exports"],[19,31,70,0],[20,4,70,0,"enumerable"],[20,14,70,0],[21,4,70,0,"get"],[21,7,70,0],[21,18,70,0,"get"],[21,19,70,0],[22,6,70,0],[22,13,70,0,"useNetwork"],[22,23,70,0],[23,4,70,0],[24,2,70,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeCommunityNetinfo"],[26,34,2,0],[26,37,2,0,"require"],[26,44,2,0],[26,45,2,0,"_dependencyMap"],[26,59,2,0],[27,2,2,0],[27,6,2,0,"NetInfo"],[27,13,2,0],[27,16,2,0,"_interopDefault"],[27,31,2,0],[27,32,2,0,"_reactNativeCommunityNetinfo"],[27,60,2,0],[28,2,3,0],[28,6,3,0,"_servicesSyncService"],[28,26,3,0],[28,29,3,0,"require"],[28,36,3,0],[28,37,3,0,"_dependencyMap"],[28,51,3,0],[29,2,4,0],[29,6,4,0,"_servicesStorage"],[29,22,4,0],[29,25,4,0,"require"],[29,32,4,0],[29,33,4,0,"_dependencyMap"],[29,47,4,0],[30,2,4,53],[30,6,4,53,"_reactJsxDevRuntime"],[30,25,4,53],[30,28,4,53,"require"],[30,35,4,53],[30,36,4,53,"_dependencyMap"],[30,50,4,53],[31,2,13,0],[31,8,13,6,"NetworkContext"],[31,22,13,20],[31,38,13,23],[31,42,13,23,"createContext"],[31,48,13,36],[31,49,13,36,"createContext"],[31,62,13,36],[31,64,13,69,"undefined"],[31,73,13,78],[31,74,13,79],[32,2,15,7],[32,8,15,13,"NetworkProvider"],[32,23,15,28],[32,26,15,31,"NetworkProvider"],[32,27,15,32],[33,4,15,34,"children"],[34,2,15,68],[34,3,15,69],[34,8,15,74],[35,4,16,2],[35,10,16,8],[35,11,16,9,"isConnected"],[35,22,16,20],[35,24,16,22,"setIsConnected"],[35,38,16,36],[35,39,16,37],[35,42,16,40],[35,46,16,40,"useState"],[35,52,16,48],[35,53,16,48,"useState"],[35,61,16,48],[35,63,16,49],[35,67,16,53],[35,68,16,54],[36,4,17,2],[36,10,17,8],[36,11,17,9,"pendingSync"],[36,22,17,20],[36,24,17,22,"setPendingSync"],[36,38,17,36],[36,39,17,37],[36,42,17,40],[36,46,17,40,"useState"],[36,52,17,48],[36,53,17,48,"useState"],[36,61,17,48],[36,63,17,49],[36,64,17,50],[36,65,17,51],[37,4,19,2],[37,8,19,2,"useEffect"],[37,14,19,11],[37,15,19,11,"useEffect"],[37,24,19,11],[37,26,19,12],[37,32,19,18],[38,6,20,4],[39,6,21,4],[39,12,21,10,"unsubscribe"],[39,23,21,21],[39,26,21,24,"NetInfo"],[39,33,21,31],[39,34,21,31,"default"],[39,41,21,31],[39,42,21,32,"addEventListener"],[39,58,21,48],[39,59,21,50,"state"],[39,64,21,55],[39,68,21,60],[40,8,22,6,"setIsConnected"],[40,22,22,20],[40,23,22,21,"state"],[40,28,22,26],[40,29,22,27,"isConnected"],[40,40,22,38],[40,44,22,42],[40,49,22,47],[40,50,22,48],[42,8,24,6],[43,8,25,6],[43,12,25,10,"state"],[43,17,25,15],[43,18,25,16,"isConnected"],[43,29,25,27],[43,33,25,31],[43,34,25,32,"isConnected"],[43,45,25,43],[43,47,25,45],[44,10,26,8,"syncNow"],[44,17,26,15],[44,18,26,16],[44,19,26,17],[45,8,27,6],[46,6,28,4],[46,7,28,5],[46,8,28,6],[48,6,30,4],[49,6,31,4],[49,12,31,10,"syncInterval"],[49,24,31,22],[49,27,31,25,"syncService"],[49,47,31,36],[49,48,31,36,"syncService"],[49,59,31,36],[49,60,31,37,"startAutoSync"],[49,73,31,50],[49,74,31,51],[49,75,31,52],[49,76,31,53],[51,6,33,4],[52,6,34,4,"updatePendingCount"],[52,24,34,22],[52,25,34,23],[52,26,34,24],[53,6,35,4],[53,12,35,10,"countInterval"],[53,25,35,23],[53,28,35,26,"setInterval"],[53,39,35,37],[53,40,35,38,"updatePendingCount"],[53,58,35,56],[53,60,35,58],[53,65,35,63],[53,66,35,64],[53,67,35,65],[53,68,35,66],[55,6,37,4],[55,13,37,11],[55,19,37,17],[56,8,38,6,"unsubscribe"],[56,19,38,17],[56,20,38,18],[56,21,38,19],[57,8,39,6,"clearInterval"],[57,21,39,19],[57,22,39,20,"syncInterval"],[57,34,39,32],[57,35,39,33],[58,8,40,6,"clearInterval"],[58,21,40,19],[58,22,40,20,"countInterval"],[58,35,40,33],[58,36,40,34],[59,6,41,4],[59,7,41,5],[60,4,42,2],[60,5,42,3],[60,7,42,5],[60,9,42,7],[60,10,42,8],[61,4,44,2],[61,10,44,8,"updatePendingCount"],[61,28,44,26],[61,31,44,29],[61,37,44,29,"updatePendingCount"],[61,38,44,29],[61,43,44,41],[62,6,45,4],[62,12,45,10,"locations"],[62,21,45,19],[62,24,45,22],[62,30,45,28,"storageService"],[62,46,45,42],[62,47,45,42,"storageService"],[62,61,45,42],[62,62,45,43,"getPendingLocations"],[62,81,45,62],[62,82,45,63],[62,83,45,64],[63,6,46,4],[63,12,46,10,"messages"],[63,20,46,18],[63,23,46,21],[63,29,46,27,"storageService"],[63,45,46,41],[63,46,46,41,"storageService"],[63,60,46,41],[63,61,46,42,"getPendingMessages"],[63,79,46,60],[63,80,46,61],[63,81,46,62],[64,6,47,4],[64,12,47,10,"respondents"],[64,23,47,21],[64,26,47,24],[64,32,47,30,"storageService"],[64,48,47,44],[64,49,47,44,"storageService"],[64,63,47,44],[64,64,47,45,"getPendingRespondents"],[64,85,47,66],[64,86,47,67],[64,87,47,68],[65,6,48,4,"setPendingSync"],[65,20,48,18],[65,21,48,19,"locations"],[65,30,48,28],[65,31,48,29,"length"],[65,37,48,35],[65,40,48,38,"messages"],[65,48,48,46],[65,49,48,47,"length"],[65,55,48,53],[65,58,48,56,"respondents"],[65,69,48,67],[65,70,48,68,"length"],[65,76,48,74],[65,77,48,75],[66,4,49,2],[66,5,49,3],[67,4,51,2],[67,10,51,8,"syncNow"],[67,17,51,15],[67,20,51,18],[67,26,51,18,"syncNow"],[67,27,51,18],[67,32,51,30],[68,6,52,4],[68,12,52,10,"syncService"],[68,32,52,21],[68,33,52,21,"syncService"],[68,44,52,21],[68,45,52,22,"syncAll"],[68,52,52,29],[68,53,52,30],[68,54,52,31],[69,6,53,4],[69,12,53,10,"updatePendingCount"],[69,30,53,28],[69,31,53,29],[69,32,53,30],[70,4,54,2],[70,5,54,3],[71,4,56,2],[71,24,57,4],[71,28,57,4,"_reactJsxDevRuntime"],[71,47,57,4],[71,48,57,4,"jsxDEV"],[71,54,57,4],[71,56,57,5,"NetworkContext"],[71,70,57,19],[71,71,57,20,"Provider"],[71,79,57,28],[72,6,58,6,"value"],[72,11,58,11],[72,13,58,13],[73,8,59,8,"isConnected"],[73,19,59,19],[74,8,60,8,"isOnline"],[74,16,60,16],[74,18,60,18,"isConnected"],[74,29,60,29],[75,8,61,8,"pendingSync"],[75,19,61,19],[76,8,62,8,"syncNow"],[77,6,63,6],[77,7,63,8],[78,6,63,8,"children"],[78,14,63,8],[78,16,65,7,"children"],[79,4,65,15],[80,6,65,15,"fileName"],[80,14,65,15],[80,16,65,15,"_jsxFileName"],[80,28,65,15],[81,6,65,15,"lineNumber"],[81,16,65,15],[82,6,65,15,"columnNumber"],[82,18,65,15],[83,4,65,15],[83,11,66,29],[83,12,66,30],[84,2,68,0],[84,3,68,1],[85,2,70,7],[85,8,70,13,"useNetwork"],[85,18,70,23],[85,21,70,26,"useNetwork"],[85,22,70,26],[85,27,70,32],[86,4,71,2],[86,10,71,8,"context"],[86,17,71,15],[86,20,71,18],[86,24,71,18,"useContext"],[86,30,71,28],[86,31,71,28,"useContext"],[86,41,71,28],[86,43,71,29,"NetworkContext"],[86,57,71,43],[86,58,71,44],[87,4,72,2],[87,8,72,6,"context"],[87,15,72,13],[87,20,72,18,"undefined"],[87,29,72,27],[87,31,72,29],[88,6,73,4],[88,12,73,10],[88,16,73,14,"Error"],[88,21,73,19],[88,22,73,20],[88,72,73,70],[88,73,73,71],[89,4,74,2],[90,4,75,2],[90,11,75,9,"context"],[90,18,75,16],[91,2,76,0],[91,3,76,1],[92,0,76,2],[92,3]],"functionMap":{"names":["<global>","NetworkProvider","useEffect$argument_0","NetInfo.addEventListener$argument_0","<anonymous>","updatePendingCount","syncNow","useNetwork"],"mappings":"AAA;+BCc;YCI;iDCE;KDO;WES;KFI;GDC;6BIE;GJK;kBKE;GLG;CDc;0BOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}