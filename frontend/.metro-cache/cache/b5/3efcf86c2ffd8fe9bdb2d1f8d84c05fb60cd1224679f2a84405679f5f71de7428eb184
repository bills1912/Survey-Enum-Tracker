{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":82,"index":82}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":84},"end":{"line":2,"column":54,"index":138}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"../services/syncService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":140},"end":{"line":3,"column":54,"index":194}}],"key":"joJd5R6pPIG9/TZe5fTFFjaC2zk=","exportNames":["*"],"imports":1}},{"name":"../services/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":196},"end":{"line":4,"column":53,"index":249}}],"key":"zqGJUMQQZwIry90rqgd1gunX3aI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"NetworkProvider\", {\n    enumerable: true,\n    get: function () {\n      return NetworkProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useNetwork\", {\n    enumerable: true,\n    get: function () {\n      return useNetwork;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[3]);\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _servicesSyncService = require(_dependencyMap[4]);\n  var _servicesStorage = require(_dependencyMap[5]);\n  var _reactJsxRuntime = require(_dependencyMap[6]);\n  var NetworkContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  var NetworkProvider = _ref => {\n    var children = _ref.children;\n    var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      isConnected = _useState2[0],\n      setIsConnected = _useState2[1];\n    var _useState3 = (0, _react.useState)(0),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      pendingSync = _useState4[0],\n      setPendingSync = _useState4[1];\n    (0, _react.useEffect)(() => {\n      // Listen to network changes\n      var unsubscribe = NetInfo.default.addEventListener(state => {\n        setIsConnected(state.isConnected ?? false);\n\n        // Auto-sync when coming online\n        if (state.isConnected && !isConnected) {\n          syncNow();\n        }\n      });\n\n      // Start auto-sync\n      var syncInterval = _servicesSyncService.syncService.startAutoSync(2);\n\n      // Update pending count\n      updatePendingCount();\n      var countInterval = setInterval(updatePendingCount, 30000); // Check every 30s\n\n      return () => {\n        unsubscribe();\n        clearInterval(syncInterval);\n        clearInterval(countInterval);\n      };\n    }, []);\n    var updatePendingCount = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* () {\n        var locations = yield _servicesStorage.storageService.getPendingLocations();\n        var messages = yield _servicesStorage.storageService.getPendingMessages();\n        var respondents = yield _servicesStorage.storageService.getPendingRespondents();\n        setPendingSync(locations.length + messages.length + respondents.length);\n      });\n      return function updatePendingCount() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var syncNow = /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* () {\n        yield _servicesSyncService.syncService.syncAll();\n        yield updatePendingCount();\n      });\n      return function syncNow() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    return /*#__PURE__*/(0, _reactJsxRuntime.jsx)(NetworkContext.Provider, {\n      value: {\n        isConnected,\n        isOnline: isConnected,\n        pendingSync,\n        syncNow\n      },\n      children: children\n    });\n  };\n  var useNetwork = () => {\n    var context = (0, _react.useContext)(NetworkContext);\n    if (context === undefined) {\n      throw new Error('useNetwork must be used within a NetworkProvider');\n    }\n    return context;\n  };\n});","lineCount":106,"map":[[12,2,15,0,"Object"],[12,8,15,0],[12,9,15,0,"defineProperty"],[12,23,15,0],[12,24,15,0,"exports"],[12,31,15,0],[13,4,15,0,"enumerable"],[13,14,15,0],[14,4,15,0,"get"],[14,7,15,0],[14,18,15,0,"get"],[14,19,15,0],[15,6,15,0],[15,13,15,0,"NetworkProvider"],[15,28,15,0],[16,4,15,0],[17,2,15,0],[18,2,70,0,"Object"],[18,8,70,0],[18,9,70,0,"defineProperty"],[18,23,70,0],[18,24,70,0,"exports"],[18,31,70,0],[19,4,70,0,"enumerable"],[19,14,70,0],[20,4,70,0,"get"],[20,7,70,0],[20,18,70,0,"get"],[20,19,70,0],[21,6,70,0],[21,13,70,0,"useNetwork"],[21,23,70,0],[22,4,70,0],[23,2,70,0],[24,2,76,2],[24,6,76,2,"_babelRuntimeHelpersAsyncToGenerator"],[24,42,76,2],[24,45,76,2,"require"],[24,52,76,2],[24,53,76,2,"_dependencyMap"],[24,67,76,2],[25,2,76,2],[25,6,76,2,"_asyncToGenerator"],[25,23,76,2],[25,26,76,2,"_interopDefault"],[25,41,76,2],[25,42,76,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,78,76,2],[26,2,76,2],[26,6,76,2,"_babelRuntimeHelpersSlicedToArray"],[26,39,76,2],[26,42,76,2,"require"],[26,49,76,2],[26,50,76,2,"_dependencyMap"],[26,64,76,2],[27,2,76,2],[27,6,76,2,"_slicedToArray"],[27,20,76,2],[27,23,76,2,"_interopDefault"],[27,38,76,2],[27,39,76,2,"_babelRuntimeHelpersSlicedToArray"],[27,72,76,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeCommunityNetinfo"],[29,34,2,0],[29,37,2,0,"require"],[29,44,2,0],[29,45,2,0,"_dependencyMap"],[29,59,2,0],[30,2,2,0],[30,6,2,0,"NetInfo"],[30,13,2,0],[30,16,2,0,"_interopDefault"],[30,31,2,0],[30,32,2,0,"_reactNativeCommunityNetinfo"],[30,60,2,0],[31,2,3,0],[31,6,3,0,"_servicesSyncService"],[31,26,3,0],[31,29,3,0,"require"],[31,36,3,0],[31,37,3,0,"_dependencyMap"],[31,51,3,0],[32,2,4,0],[32,6,4,0,"_servicesStorage"],[32,22,4,0],[32,25,4,0,"require"],[32,32,4,0],[32,33,4,0,"_dependencyMap"],[32,47,4,0],[33,2,4,53],[33,6,4,53,"_reactJsxRuntime"],[33,22,4,53],[33,25,4,53,"require"],[33,32,4,53],[33,33,4,53,"_dependencyMap"],[33,47,4,53],[34,2,13,0],[34,6,13,6,"NetworkContext"],[34,20,13,20],[34,36,13,23],[34,40,13,23,"createContext"],[34,46,13,36],[34,47,13,36,"createContext"],[34,60,13,36],[34,62,13,69,"undefined"],[34,71,13,78],[34,72,13,79],[35,2,15,7],[35,6,15,13,"NetworkProvider"],[35,21,15,28],[35,24,15,31,"_ref"],[35,28,15,31],[35,32,15,74],[36,4,15,74],[36,8,15,34,"children"],[36,16,15,42],[36,19,15,42,"_ref"],[36,23,15,42],[36,24,15,34,"children"],[36,32,15,42],[37,4,16,2],[37,8,16,2,"_useState"],[37,17,16,2],[37,20,16,40],[37,24,16,40,"useState"],[37,30,16,48],[37,31,16,48,"useState"],[37,39,16,48],[37,41,16,49],[37,45,16,53],[37,46,16,54],[38,6,16,54,"_useState2"],[38,16,16,54],[38,23,16,54,"_slicedToArray"],[38,37,16,54],[38,38,16,54,"default"],[38,45,16,54],[38,47,16,54,"_useState"],[38,56,16,54],[39,6,16,9,"isConnected"],[39,17,16,20],[39,20,16,20,"_useState2"],[39,30,16,20],[40,6,16,22,"setIsConnected"],[40,20,16,36],[40,23,16,36,"_useState2"],[40,33,16,36],[41,4,17,2],[41,8,17,2,"_useState3"],[41,18,17,2],[41,21,17,40],[41,25,17,40,"useState"],[41,31,17,48],[41,32,17,48,"useState"],[41,40,17,48],[41,42,17,49],[41,43,17,50],[41,44,17,51],[42,6,17,51,"_useState4"],[42,16,17,51],[42,23,17,51,"_slicedToArray"],[42,37,17,51],[42,38,17,51,"default"],[42,45,17,51],[42,47,17,51,"_useState3"],[42,57,17,51],[43,6,17,9,"pendingSync"],[43,17,17,20],[43,20,17,20,"_useState4"],[43,30,17,20],[44,6,17,22,"setPendingSync"],[44,20,17,36],[44,23,17,36,"_useState4"],[44,33,17,36],[45,4,19,2],[45,8,19,2,"useEffect"],[45,14,19,11],[45,15,19,11,"useEffect"],[45,24,19,11],[45,26,19,12],[45,32,19,18],[46,6,20,4],[47,6,21,4],[47,10,21,10,"unsubscribe"],[47,21,21,21],[47,24,21,24,"NetInfo"],[47,31,21,31],[47,32,21,31,"default"],[47,39,21,31],[47,40,21,32,"addEventListener"],[47,56,21,48],[47,57,21,50,"state"],[47,62,21,55],[47,66,21,60],[48,8,22,6,"setIsConnected"],[48,22,22,20],[48,23,22,21,"state"],[48,28,22,26],[48,29,22,27,"isConnected"],[48,40,22,38],[48,44,22,42],[48,49,22,47],[48,50,22,48],[50,8,24,6],[51,8,25,6],[51,12,25,10,"state"],[51,17,25,15],[51,18,25,16,"isConnected"],[51,29,25,27],[51,33,25,31],[51,34,25,32,"isConnected"],[51,45,25,43],[51,47,25,45],[52,10,26,8,"syncNow"],[52,17,26,15],[52,18,26,16],[52,19,26,17],[53,8,27,6],[54,6,28,4],[54,7,28,5],[54,8,28,6],[56,6,30,4],[57,6,31,4],[57,10,31,10,"syncInterval"],[57,22,31,22],[57,25,31,25,"syncService"],[57,45,31,36],[57,46,31,36,"syncService"],[57,57,31,36],[57,58,31,37,"startAutoSync"],[57,71,31,50],[57,72,31,51],[57,73,31,52],[57,74,31,53],[59,6,33,4],[60,6,34,4,"updatePendingCount"],[60,24,34,22],[60,25,34,23],[60,26,34,24],[61,6,35,4],[61,10,35,10,"countInterval"],[61,23,35,23],[61,26,35,26,"setInterval"],[61,37,35,37],[61,38,35,38,"updatePendingCount"],[61,56,35,56],[61,58,35,58],[61,63,35,63],[61,64,35,64],[61,65,35,65],[61,66,35,66],[63,6,37,4],[63,13,37,11],[63,19,37,17],[64,8,38,6,"unsubscribe"],[64,19,38,17],[64,20,38,18],[64,21,38,19],[65,8,39,6,"clearInterval"],[65,21,39,19],[65,22,39,20,"syncInterval"],[65,34,39,32],[65,35,39,33],[66,8,40,6,"clearInterval"],[66,21,40,19],[66,22,40,20,"countInterval"],[66,35,40,33],[66,36,40,34],[67,6,41,4],[67,7,41,5],[68,4,42,2],[68,5,42,3],[68,7,42,5],[68,9,42,7],[68,10,42,8],[69,4,44,2],[69,8,44,8,"updatePendingCount"],[69,26,44,26],[70,6,44,26],[70,10,44,26,"_ref2"],[70,15,44,26],[70,22,44,26,"_asyncToGenerator"],[70,39,44,26],[70,40,44,26,"default"],[70,47,44,26],[70,49,44,29],[70,62,44,41],[71,8,45,4],[71,12,45,10,"locations"],[71,21,45,19],[71,30,45,28,"storageService"],[71,46,45,42],[71,47,45,42,"storageService"],[71,61,45,42],[71,62,45,43,"getPendingLocations"],[71,81,45,62],[71,82,45,63],[71,83,45,64],[72,8,46,4],[72,12,46,10,"messages"],[72,20,46,18],[72,29,46,27,"storageService"],[72,45,46,41],[72,46,46,41,"storageService"],[72,60,46,41],[72,61,46,42,"getPendingMessages"],[72,79,46,60],[72,80,46,61],[72,81,46,62],[73,8,47,4],[73,12,47,10,"respondents"],[73,23,47,21],[73,32,47,30,"storageService"],[73,48,47,44],[73,49,47,44,"storageService"],[73,63,47,44],[73,64,47,45,"getPendingRespondents"],[73,85,47,66],[73,86,47,67],[73,87,47,68],[74,8,48,4,"setPendingSync"],[74,22,48,18],[74,23,48,19,"locations"],[74,32,48,28],[74,33,48,29,"length"],[74,39,48,35],[74,42,48,38,"messages"],[74,50,48,46],[74,51,48,47,"length"],[74,57,48,53],[74,60,48,56,"respondents"],[74,71,48,67],[74,72,48,68,"length"],[74,78,48,74],[74,79,48,75],[75,6,49,2],[75,7,49,3],[76,6,49,3],[76,22,44,8,"updatePendingCount"],[76,40,44,26,"updatePendingCount"],[76,41,44,26],[77,8,44,26],[77,15,44,26,"_ref2"],[77,20,44,26],[77,21,44,26,"apply"],[77,26,44,26],[77,33,44,26,"arguments"],[77,42,44,26],[78,6,44,26],[79,4,44,26],[79,7,49,3],[80,4,51,2],[80,8,51,8,"syncNow"],[80,15,51,15],[81,6,51,15],[81,10,51,15,"_ref3"],[81,15,51,15],[81,22,51,15,"_asyncToGenerator"],[81,39,51,15],[81,40,51,15,"default"],[81,47,51,15],[81,49,51,18],[81,62,51,30],[82,8,52,4],[82,14,52,10,"syncService"],[82,34,52,21],[82,35,52,21,"syncService"],[82,46,52,21],[82,47,52,22,"syncAll"],[82,54,52,29],[82,55,52,30],[82,56,52,31],[83,8,53,4],[83,14,53,10,"updatePendingCount"],[83,32,53,28],[83,33,53,29],[83,34,53,30],[84,6,54,2],[84,7,54,3],[85,6,54,3],[85,22,51,8,"syncNow"],[85,29,51,15,"syncNow"],[85,30,51,15],[86,8,51,15],[86,15,51,15,"_ref3"],[86,20,51,15],[86,21,51,15,"apply"],[86,26,51,15],[86,33,51,15,"arguments"],[86,42,51,15],[87,6,51,15],[88,4,51,15],[88,7,54,3],[89,4,56,2],[89,24,57,4],[89,28,57,4,"_reactJsxRuntime"],[89,44,57,4],[89,45,57,4,"jsx"],[89,48,57,4],[89,50,57,5,"NetworkContext"],[89,64,57,19],[89,65,57,20,"Provider"],[89,73,57,28],[90,6,58,6,"value"],[90,11,58,11],[90,13,58,13],[91,8,59,8,"isConnected"],[91,19,59,19],[92,8,60,8,"isOnline"],[92,16,60,16],[92,18,60,18,"isConnected"],[92,29,60,29],[93,8,61,8,"pendingSync"],[93,19,61,19],[94,8,62,8,"syncNow"],[95,6,63,6],[95,7,63,8],[96,6,63,8,"children"],[96,14,63,8],[96,16,65,7,"children"],[97,4,65,15],[97,5,66,29],[97,6,66,30],[98,2,68,0],[98,3,68,1],[99,2,70,7],[99,6,70,13,"useNetwork"],[99,16,70,23],[99,19,70,26,"useNetwork"],[99,20,70,26],[99,25,70,32],[100,4,71,2],[100,8,71,8,"context"],[100,15,71,15],[100,18,71,18],[100,22,71,18,"useContext"],[100,28,71,28],[100,29,71,28,"useContext"],[100,39,71,28],[100,41,71,29,"NetworkContext"],[100,55,71,43],[100,56,71,44],[101,4,72,2],[101,8,72,6,"context"],[101,15,72,13],[101,20,72,18,"undefined"],[101,29,72,27],[101,31,72,29],[102,6,73,4],[102,12,73,10],[102,16,73,14,"Error"],[102,21,73,19],[102,22,73,20],[102,72,73,70],[102,73,73,71],[103,4,74,2],[104,4,75,2],[104,11,75,9,"context"],[104,18,75,16],[105,2,76,0],[105,3,76,1],[106,0,76,2],[106,3]],"functionMap":{"names":["<global>","NetworkProvider","useEffect$argument_0","NetInfo.addEventListener$argument_0","<anonymous>","updatePendingCount","syncNow","useNetwork"],"mappings":"AAA;+BCc;YCI;iDCE;KDO;WES;KFI;GDC;6BIE;GJK;kBKE;GLG;CDc;0BOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}