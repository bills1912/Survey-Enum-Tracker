{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":82,"index":82}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":83},"end":{"line":2,"column":54,"index":137}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"../services/syncService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":138},"end":{"line":3,"column":54,"index":192}}],"key":"joJd5R6pPIG9/TZe5fTFFjaC2zk=","exportNames":["*"],"imports":1}},{"name":"../services/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":193},"end":{"line":4,"column":53,"index":246}}],"key":"zqGJUMQQZwIry90rqgd1gunX3aI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/NetworkContext.tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"NetworkProvider\", {\n    enumerable: true,\n    get: function () {\n      return NetworkProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useNetwork\", {\n    enumerable: true,\n    get: function () {\n      return useNetwork;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[3], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _servicesSyncService = require(_dependencyMap[4], \"../services/syncService\");\n  var _servicesStorage = require(_dependencyMap[5], \"../services/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[6], \"react/jsx-dev-runtime\");\n  var NetworkContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  var NetworkProvider = function NetworkProvider(_ref) {\n    _s();\n    var children = _ref.children;\n    var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      isConnected = _useState2[0],\n      setIsConnected = _useState2[1];\n    var _useState3 = (0, _react.useState)(0),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      pendingSync = _useState4[0],\n      setPendingSync = _useState4[1];\n    (0, _react.useEffect)(function () {\n      // Listen to network changes\n      var unsubscribe = NetInfo.default.addEventListener(function (state) {\n        var _state$isConnected;\n        setIsConnected((_state$isConnected = state.isConnected) != null ? _state$isConnected : false);\n\n        // Auto-sync when coming online\n        if (state.isConnected && !isConnected) {\n          syncNow();\n        }\n      });\n\n      // Start auto-sync\n      var syncInterval = _servicesSyncService.syncService.startAutoSync(2);\n\n      // Update pending count\n      updatePendingCount();\n      var countInterval = setInterval(updatePendingCount, 30000); // Check every 30s\n\n      return function () {\n        unsubscribe();\n        clearInterval(syncInterval);\n        clearInterval(countInterval);\n      };\n    }, []);\n    var updatePendingCount = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* () {\n        var locations = yield _servicesStorage.storageService.getPendingLocations();\n        var messages = yield _servicesStorage.storageService.getPendingMessages();\n        var respondents = yield _servicesStorage.storageService.getPendingRespondents();\n        setPendingSync(locations.length + messages.length + respondents.length);\n      });\n      return function updatePendingCount() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var syncNow = /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* () {\n        yield _servicesSyncService.syncService.syncAll();\n        yield updatePendingCount();\n      });\n      return function syncNow() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NetworkContext.Provider, {\n      value: {\n        isConnected: isConnected,\n        isOnline: isConnected,\n        pendingSync: pendingSync,\n        syncNow: syncNow\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, _this);\n  };\n  _s(NetworkProvider, \"Y6Uj6N/AEft8z+RFOY/JntmLl2g=\");\n  _c = NetworkProvider;\n  var useNetwork = function useNetwork() {\n    _s2();\n    var context = (0, _react.useContext)(NetworkContext);\n    if (context === undefined) {\n      throw new Error('useNetwork must be used within a NetworkProvider');\n    }\n    return context;\n  };\n  _s2(useNetwork, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"NetworkProvider\");\n});","lineCount":122,"map":[[16,2,15,0,"Object"],[16,8,15,0],[16,9,15,0,"defineProperty"],[16,23,15,0],[16,24,15,0,"exports"],[16,31,15,0],[17,4,15,0,"enumerable"],[17,14,15,0],[18,4,15,0,"get"],[18,7,15,0],[18,18,15,0,"get"],[18,19,15,0],[19,6,15,0],[19,13,15,0,"NetworkProvider"],[19,28,15,0],[20,4,15,0],[21,2,15,0],[22,2,70,0,"Object"],[22,8,70,0],[22,9,70,0,"defineProperty"],[22,23,70,0],[22,24,70,0,"exports"],[22,31,70,0],[23,4,70,0,"enumerable"],[23,14,70,0],[24,4,70,0,"get"],[24,7,70,0],[24,18,70,0,"get"],[24,19,70,0],[25,6,70,0],[25,13,70,0,"useNetwork"],[25,23,70,0],[26,4,70,0],[27,2,70,0],[28,2,76,2],[28,6,76,2,"_babelRuntimeHelpersAsyncToGenerator"],[28,42,76,2],[28,45,76,2,"require"],[28,52,76,2],[28,53,76,2,"_dependencyMap"],[28,67,76,2],[29,2,76,2],[29,6,76,2,"_asyncToGenerator"],[29,23,76,2],[29,26,76,2,"_interopDefault"],[29,41,76,2],[29,42,76,2,"_babelRuntimeHelpersAsyncToGenerator"],[29,78,76,2],[30,2,76,2],[30,6,76,2,"_babelRuntimeHelpersSlicedToArray"],[30,39,76,2],[30,42,76,2,"require"],[30,49,76,2],[30,50,76,2,"_dependencyMap"],[30,64,76,2],[31,2,76,2],[31,6,76,2,"_slicedToArray"],[31,20,76,2],[31,23,76,2,"_interopDefault"],[31,38,76,2],[31,39,76,2,"_babelRuntimeHelpersSlicedToArray"],[31,72,76,2],[32,2,1,0],[32,6,1,0,"_react"],[32,12,1,0],[32,15,1,0,"require"],[32,22,1,0],[32,23,1,0,"_dependencyMap"],[32,37,1,0],[33,2,2,0],[33,6,2,0,"_reactNativeCommunityNetinfo"],[33,34,2,0],[33,37,2,0,"require"],[33,44,2,0],[33,45,2,0,"_dependencyMap"],[33,59,2,0],[34,2,2,0],[34,6,2,0,"NetInfo"],[34,13,2,0],[34,16,2,0,"_interopDefault"],[34,31,2,0],[34,32,2,0,"_reactNativeCommunityNetinfo"],[34,60,2,0],[35,2,3,0],[35,6,3,0,"_servicesSyncService"],[35,26,3,0],[35,29,3,0,"require"],[35,36,3,0],[35,37,3,0,"_dependencyMap"],[35,51,3,0],[36,2,4,0],[36,6,4,0,"_servicesStorage"],[36,22,4,0],[36,25,4,0,"require"],[36,32,4,0],[36,33,4,0,"_dependencyMap"],[36,47,4,0],[37,2,4,53],[37,6,4,53,"_reactJsxDevRuntime"],[37,25,4,53],[37,28,4,53,"require"],[37,35,4,53],[37,36,4,53,"_dependencyMap"],[37,50,4,53],[38,2,13,0],[38,6,13,6,"NetworkContext"],[38,20,13,20],[38,36,13,23],[38,40,13,23,"createContext"],[38,46,13,36],[38,47,13,36,"createContext"],[38,60,13,36],[38,62,13,69,"undefined"],[38,71,13,78],[38,72,13,79],[39,2,15,7],[39,6,15,13,"NetworkProvider"],[39,21,15,28],[39,24,15,31],[39,33,15,13,"NetworkProvider"],[39,48,15,28,"NetworkProvider"],[39,49,15,28,"_ref"],[39,53,15,28],[39,55,15,74],[40,4,15,74,"_s"],[40,6,15,74],[41,4,15,74],[41,8,15,34,"children"],[41,16,15,42],[41,19,15,42,"_ref"],[41,23,15,42],[41,24,15,34,"children"],[41,32,15,42],[42,4,16,2],[42,8,16,2,"_useState"],[42,17,16,2],[42,20,16,40],[42,24,16,40,"useState"],[42,30,16,48],[42,31,16,48,"useState"],[42,39,16,48],[42,41,16,49],[42,45,16,53],[42,46,16,54],[43,6,16,54,"_useState2"],[43,16,16,54],[43,23,16,54,"_slicedToArray"],[43,37,16,54],[43,38,16,54,"default"],[43,45,16,54],[43,47,16,54,"_useState"],[43,56,16,54],[44,6,16,9,"isConnected"],[44,17,16,20],[44,20,16,20,"_useState2"],[44,30,16,20],[45,6,16,22,"setIsConnected"],[45,20,16,36],[45,23,16,36,"_useState2"],[45,33,16,36],[46,4,17,2],[46,8,17,2,"_useState3"],[46,18,17,2],[46,21,17,40],[46,25,17,40,"useState"],[46,31,17,48],[46,32,17,48,"useState"],[46,40,17,48],[46,42,17,49],[46,43,17,50],[46,44,17,51],[47,6,17,51,"_useState4"],[47,16,17,51],[47,23,17,51,"_slicedToArray"],[47,37,17,51],[47,38,17,51,"default"],[47,45,17,51],[47,47,17,51,"_useState3"],[47,57,17,51],[48,6,17,9,"pendingSync"],[48,17,17,20],[48,20,17,20,"_useState4"],[48,30,17,20],[49,6,17,22,"setPendingSync"],[49,20,17,36],[49,23,17,36,"_useState4"],[49,33,17,36],[50,4,19,2],[50,8,19,2,"useEffect"],[50,14,19,11],[50,15,19,11,"useEffect"],[50,24,19,11],[50,26,19,12],[50,38,19,18],[51,6,20,4],[52,6,21,4],[52,10,21,10,"unsubscribe"],[52,21,21,21],[52,24,21,24,"NetInfo"],[52,31,21,31],[52,32,21,31,"default"],[52,39,21,31],[52,40,21,32,"addEventListener"],[52,56,21,48],[52,57,21,49],[52,67,21,50,"state"],[52,72,21,55],[52,74,21,60],[53,8,21,60],[53,12,21,60,"_state$isConnected"],[53,30,21,60],[54,8,22,6,"setIsConnected"],[54,22,22,20],[54,24,22,20,"_state$isConnected"],[54,42,22,20],[54,45,22,21,"state"],[54,50,22,26],[54,51,22,27,"isConnected"],[54,62,22,38],[54,74,22,38,"_state$isConnected"],[54,92,22,38],[54,95,22,42],[54,100,22,47],[54,101,22,48],[56,8,24,6],[57,8,25,6],[57,12,25,10,"state"],[57,17,25,15],[57,18,25,16,"isConnected"],[57,29,25,27],[57,33,25,31],[57,34,25,32,"isConnected"],[57,45,25,43],[57,47,25,45],[58,10,26,8,"syncNow"],[58,17,26,15],[58,18,26,16],[58,19,26,17],[59,8,27,6],[60,6,28,4],[60,7,28,5],[60,8,28,6],[62,6,30,4],[63,6,31,4],[63,10,31,10,"syncInterval"],[63,22,31,22],[63,25,31,25,"syncService"],[63,45,31,36],[63,46,31,36,"syncService"],[63,57,31,36],[63,58,31,37,"startAutoSync"],[63,71,31,50],[63,72,31,51],[63,73,31,52],[63,74,31,53],[65,6,33,4],[66,6,34,4,"updatePendingCount"],[66,24,34,22],[66,25,34,23],[66,26,34,24],[67,6,35,4],[67,10,35,10,"countInterval"],[67,23,35,23],[67,26,35,26,"setInterval"],[67,37,35,37],[67,38,35,38,"updatePendingCount"],[67,56,35,56],[67,58,35,58],[67,63,35,63],[67,64,35,64],[67,65,35,65],[67,66,35,66],[69,6,37,4],[69,13,37,11],[69,25,37,17],[70,8,38,6,"unsubscribe"],[70,19,38,17],[70,20,38,18],[70,21,38,19],[71,8,39,6,"clearInterval"],[71,21,39,19],[71,22,39,20,"syncInterval"],[71,34,39,32],[71,35,39,33],[72,8,40,6,"clearInterval"],[72,21,40,19],[72,22,40,20,"countInterval"],[72,35,40,33],[72,36,40,34],[73,6,41,4],[73,7,41,5],[74,4,42,2],[74,5,42,3],[74,7,42,5],[74,9,42,7],[74,10,42,8],[75,4,44,2],[75,8,44,8,"updatePendingCount"],[75,26,44,26],[76,6,44,26],[76,10,44,26,"_ref2"],[76,15,44,26],[76,22,44,26,"_asyncToGenerator"],[76,39,44,26],[76,40,44,26,"default"],[76,47,44,26],[76,49,44,29],[76,62,44,41],[77,8,45,4],[77,12,45,10,"locations"],[77,21,45,19],[77,30,45,28,"storageService"],[77,46,45,42],[77,47,45,42,"storageService"],[77,61,45,42],[77,62,45,43,"getPendingLocations"],[77,81,45,62],[77,82,45,63],[77,83,45,64],[78,8,46,4],[78,12,46,10,"messages"],[78,20,46,18],[78,29,46,27,"storageService"],[78,45,46,41],[78,46,46,41,"storageService"],[78,60,46,41],[78,61,46,42,"getPendingMessages"],[78,79,46,60],[78,80,46,61],[78,81,46,62],[79,8,47,4],[79,12,47,10,"respondents"],[79,23,47,21],[79,32,47,30,"storageService"],[79,48,47,44],[79,49,47,44,"storageService"],[79,63,47,44],[79,64,47,45,"getPendingRespondents"],[79,85,47,66],[79,86,47,67],[79,87,47,68],[80,8,48,4,"setPendingSync"],[80,22,48,18],[80,23,48,19,"locations"],[80,32,48,28],[80,33,48,29,"length"],[80,39,48,35],[80,42,48,38,"messages"],[80,50,48,46],[80,51,48,47,"length"],[80,57,48,53],[80,60,48,56,"respondents"],[80,71,48,67],[80,72,48,68,"length"],[80,78,48,74],[80,79,48,75],[81,6,49,2],[81,7,49,3],[82,6,49,3],[82,22,44,8,"updatePendingCount"],[82,40,44,26,"updatePendingCount"],[82,41,44,26],[83,8,44,26],[83,15,44,26,"_ref2"],[83,20,44,26],[83,21,44,26,"apply"],[83,26,44,26],[83,33,44,26,"arguments"],[83,42,44,26],[84,6,44,26],[85,4,44,26],[85,7,49,3],[86,4,51,2],[86,8,51,8,"syncNow"],[86,15,51,15],[87,6,51,15],[87,10,51,15,"_ref3"],[87,15,51,15],[87,22,51,15,"_asyncToGenerator"],[87,39,51,15],[87,40,51,15,"default"],[87,47,51,15],[87,49,51,18],[87,62,51,30],[88,8,52,4],[88,14,52,10,"syncService"],[88,34,52,21],[88,35,52,21,"syncService"],[88,46,52,21],[88,47,52,22,"syncAll"],[88,54,52,29],[88,55,52,30],[88,56,52,31],[89,8,53,4],[89,14,53,10,"updatePendingCount"],[89,32,53,28],[89,33,53,29],[89,34,53,30],[90,6,54,2],[90,7,54,3],[91,6,54,3],[91,22,51,8,"syncNow"],[91,29,51,15,"syncNow"],[91,30,51,15],[92,8,51,15],[92,15,51,15,"_ref3"],[92,20,51,15],[92,21,51,15,"apply"],[92,26,51,15],[92,33,51,15,"arguments"],[92,42,51,15],[93,6,51,15],[94,4,51,15],[94,7,54,3],[95,4,56,2],[95,24,57,4],[95,28,57,4,"_reactJsxDevRuntime"],[95,47,57,4],[95,48,57,4,"jsxDEV"],[95,54,57,4],[95,56,57,5,"NetworkContext"],[95,70,57,19],[95,71,57,20,"Provider"],[95,79,57,28],[96,6,58,6,"value"],[96,11,58,11],[96,13,58,13],[97,8,59,8,"isConnected"],[97,19,59,19],[97,21,59,8,"isConnected"],[97,32,59,19],[98,8,60,8,"isOnline"],[98,16,60,16],[98,18,60,18,"isConnected"],[98,29,60,29],[99,8,61,8,"pendingSync"],[99,19,61,19],[99,21,61,8,"pendingSync"],[99,32,61,19],[100,8,62,8,"syncNow"],[100,15,62,15],[100,17,62,8,"syncNow"],[101,6,63,6],[101,7,63,8],[102,6,63,8,"children"],[102,14,63,8],[102,16,65,7,"children"],[103,4,65,15],[104,6,65,15,"fileName"],[104,14,65,15],[104,16,65,15,"_jsxFileName"],[104,28,65,15],[105,6,65,15,"lineNumber"],[105,16,65,15],[106,6,65,15,"columnNumber"],[106,18,65,15],[107,4,65,15],[107,7,65,15,"_this"],[107,12,66,29],[107,13,66,30],[108,2,68,0],[108,3,68,1],[109,2,68,2,"_s"],[109,4,68,2],[109,5,15,13,"NetworkProvider"],[109,20,15,28],[110,2,15,28,"_c"],[110,4,15,28],[110,7,15,13,"NetworkProvider"],[110,22,15,28],[111,2,70,7],[111,6,70,13,"useNetwork"],[111,16,70,23],[111,19,70,26],[111,28,70,13,"useNetwork"],[111,38,70,23,"useNetwork"],[111,39,70,23],[111,41,70,32],[112,4,70,32,"_s2"],[112,7,70,32],[113,4,71,2],[113,8,71,8,"context"],[113,15,71,15],[113,18,71,18],[113,22,71,18,"useContext"],[113,28,71,28],[113,29,71,28,"useContext"],[113,39,71,28],[113,41,71,29,"NetworkContext"],[113,55,71,43],[113,56,71,44],[114,4,72,2],[114,8,72,6,"context"],[114,15,72,13],[114,20,72,18,"undefined"],[114,29,72,27],[114,31,72,29],[115,6,73,4],[115,12,73,10],[115,16,73,14,"Error"],[115,21,73,19],[115,22,73,20],[115,72,73,70],[115,73,73,71],[116,4,74,2],[117,4,75,2],[117,11,75,9,"context"],[117,18,75,16],[118,2,76,0],[118,3,76,1],[119,2,76,2,"_s2"],[119,5,76,2],[119,6,70,13,"useNetwork"],[119,16,70,23],[120,2,70,23],[120,6,70,23,"_c"],[120,8,70,23],[121,2,70,23,"$RefreshReg$"],[121,14,70,23],[121,15,70,23,"_c"],[121,17,70,23],[122,0,70,23],[122,3]],"functionMap":{"names":["<global>","NetworkProvider","useEffect$argument_0","NetInfo.addEventListener$argument_0","<anonymous>","updatePendingCount","syncNow","useNetwork"],"mappings":"AAA;+BCc;YCI;iDCE;KDO;WES;KFI;GDC;6BIE;GJK;kBKE;GLG;CDc;0BOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}