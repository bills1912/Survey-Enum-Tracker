{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":54,"index":144}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"../services/syncService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":145},"end":{"line":3,"column":54,"index":199}}],"key":"joJd5R6pPIG9/TZe5fTFFjaC2zk=","exportNames":["*"],"imports":1}},{"name":"../services/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":200},"end":{"line":4,"column":53,"index":253}}],"key":"zqGJUMQQZwIry90rqgd1gunX3aI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/NetworkContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"NetworkProvider\", {\n    enumerable: true,\n    get: function () {\n      return NetworkProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useNetwork\", {\n    enumerable: true,\n    get: function () {\n      return useNetwork;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[3], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _servicesSyncService = require(_dependencyMap[4], \"../services/syncService\");\n  var _servicesStorage = require(_dependencyMap[5], \"../services/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[6], \"react/jsx-dev-runtime\");\n  var NetworkContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  var NetworkProvider = _ref => {\n    _s();\n    var children = _ref.children;\n    var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      isConnected = _useState2[0],\n      setIsConnected = _useState2[1];\n    var _useState3 = (0, _react.useState)(0),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      pendingSync = _useState4[0],\n      setPendingSync = _useState4[1];\n    (0, _react.useEffect)(() => {\n      // Listen to network changes\n      var unsubscribe = NetInfo.default.addEventListener(state => {\n        setIsConnected(state.isConnected ?? false);\n\n        // Auto-sync when coming online\n        if (state.isConnected && !isConnected) {\n          syncNow();\n        }\n      });\n\n      // Start auto-sync\n      var syncInterval = _servicesSyncService.syncService.startAutoSync(2);\n\n      // Update pending count\n      updatePendingCount();\n      var countInterval = setInterval(updatePendingCount, 30000); // Check every 30s\n\n      return () => {\n        unsubscribe();\n        clearInterval(syncInterval);\n        clearInterval(countInterval);\n      };\n    }, []);\n    var updatePendingCount = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* () {\n        var locations = yield _servicesStorage.storageService.getPendingLocations();\n        var messages = yield _servicesStorage.storageService.getPendingMessages();\n        var respondents = yield _servicesStorage.storageService.getPendingRespondents();\n        setPendingSync(locations.length + messages.length + respondents.length);\n      });\n      return function updatePendingCount() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var syncNow = /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* () {\n        yield _servicesSyncService.syncService.syncAll();\n        yield updatePendingCount();\n      });\n      return function syncNow() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NetworkContext.Provider, {\n      value: {\n        isConnected,\n        isOnline: isConnected,\n        pendingSync,\n        syncNow\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this);\n  };\n  _s(NetworkProvider, \"Y6Uj6N/AEft8z+RFOY/JntmLl2g=\");\n  _c = NetworkProvider;\n  var useNetwork = () => {\n    _s2();\n    var context = (0, _react.useContext)(NetworkContext);\n    if (context === undefined) {\n      throw new Error('useNetwork must be used within a NetworkProvider');\n    }\n    return context;\n  };\n  _s2(useNetwork, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"NetworkProvider\");\n});","lineCount":120,"map":[[15,2,15,0,"Object"],[15,8,15,0],[15,9,15,0,"defineProperty"],[15,23,15,0],[15,24,15,0,"exports"],[15,31,15,0],[16,4,15,0,"enumerable"],[16,14,15,0],[17,4,15,0,"get"],[17,7,15,0],[17,18,15,0,"get"],[17,19,15,0],[18,6,15,0],[18,13,15,0,"NetworkProvider"],[18,28,15,0],[19,4,15,0],[20,2,15,0],[21,2,70,0,"Object"],[21,8,70,0],[21,9,70,0,"defineProperty"],[21,23,70,0],[21,24,70,0,"exports"],[21,31,70,0],[22,4,70,0,"enumerable"],[22,14,70,0],[23,4,70,0,"get"],[23,7,70,0],[23,18,70,0,"get"],[23,19,70,0],[24,6,70,0],[24,13,70,0,"useNetwork"],[24,23,70,0],[25,4,70,0],[26,2,70,0],[27,2,76,2],[27,6,76,2,"_babelRuntimeHelpersAsyncToGenerator"],[27,42,76,2],[27,45,76,2,"require"],[27,52,76,2],[27,53,76,2,"_dependencyMap"],[27,67,76,2],[28,2,76,2],[28,6,76,2,"_asyncToGenerator"],[28,23,76,2],[28,26,76,2,"_interopDefault"],[28,41,76,2],[28,42,76,2,"_babelRuntimeHelpersAsyncToGenerator"],[28,78,76,2],[29,2,76,2],[29,6,76,2,"_babelRuntimeHelpersSlicedToArray"],[29,39,76,2],[29,42,76,2,"require"],[29,49,76,2],[29,50,76,2,"_dependencyMap"],[29,64,76,2],[30,2,76,2],[30,6,76,2,"_slicedToArray"],[30,20,76,2],[30,23,76,2,"_interopDefault"],[30,38,76,2],[30,39,76,2,"_babelRuntimeHelpersSlicedToArray"],[30,72,76,2],[31,2,1,0],[31,6,1,0,"_react"],[31,12,1,0],[31,15,1,0,"require"],[31,22,1,0],[31,23,1,0,"_dependencyMap"],[31,37,1,0],[32,2,2,0],[32,6,2,0,"_reactNativeCommunityNetinfo"],[32,34,2,0],[32,37,2,0,"require"],[32,44,2,0],[32,45,2,0,"_dependencyMap"],[32,59,2,0],[33,2,2,0],[33,6,2,0,"NetInfo"],[33,13,2,0],[33,16,2,0,"_interopDefault"],[33,31,2,0],[33,32,2,0,"_reactNativeCommunityNetinfo"],[33,60,2,0],[34,2,3,0],[34,6,3,0,"_servicesSyncService"],[34,26,3,0],[34,29,3,0,"require"],[34,36,3,0],[34,37,3,0,"_dependencyMap"],[34,51,3,0],[35,2,4,0],[35,6,4,0,"_servicesStorage"],[35,22,4,0],[35,25,4,0,"require"],[35,32,4,0],[35,33,4,0,"_dependencyMap"],[35,47,4,0],[36,2,4,53],[36,6,4,53,"_reactJsxDevRuntime"],[36,25,4,53],[36,28,4,53,"require"],[36,35,4,53],[36,36,4,53,"_dependencyMap"],[36,50,4,53],[37,2,13,0],[37,6,13,6,"NetworkContext"],[37,20,13,20],[37,36,13,23],[37,40,13,23,"createContext"],[37,46,13,36],[37,47,13,36,"createContext"],[37,60,13,36],[37,62,13,69,"undefined"],[37,71,13,78],[37,72,13,79],[38,2,15,7],[38,6,15,13,"NetworkProvider"],[38,21,15,28],[38,24,15,31,"_ref"],[38,28,15,31],[38,32,15,74],[39,4,15,74,"_s"],[39,6,15,74],[40,4,15,74],[40,8,15,34,"children"],[40,16,15,42],[40,19,15,42,"_ref"],[40,23,15,42],[40,24,15,34,"children"],[40,32,15,42],[41,4,16,2],[41,8,16,2,"_useState"],[41,17,16,2],[41,20,16,40],[41,24,16,40,"useState"],[41,30,16,48],[41,31,16,48,"useState"],[41,39,16,48],[41,41,16,49],[41,45,16,53],[41,46,16,54],[42,6,16,54,"_useState2"],[42,16,16,54],[42,23,16,54,"_slicedToArray"],[42,37,16,54],[42,38,16,54,"default"],[42,45,16,54],[42,47,16,54,"_useState"],[42,56,16,54],[43,6,16,9,"isConnected"],[43,17,16,20],[43,20,16,20,"_useState2"],[43,30,16,20],[44,6,16,22,"setIsConnected"],[44,20,16,36],[44,23,16,36,"_useState2"],[44,33,16,36],[45,4,17,2],[45,8,17,2,"_useState3"],[45,18,17,2],[45,21,17,40],[45,25,17,40,"useState"],[45,31,17,48],[45,32,17,48,"useState"],[45,40,17,48],[45,42,17,49],[45,43,17,50],[45,44,17,51],[46,6,17,51,"_useState4"],[46,16,17,51],[46,23,17,51,"_slicedToArray"],[46,37,17,51],[46,38,17,51,"default"],[46,45,17,51],[46,47,17,51,"_useState3"],[46,57,17,51],[47,6,17,9,"pendingSync"],[47,17,17,20],[47,20,17,20,"_useState4"],[47,30,17,20],[48,6,17,22,"setPendingSync"],[48,20,17,36],[48,23,17,36,"_useState4"],[48,33,17,36],[49,4,19,2],[49,8,19,2,"useEffect"],[49,14,19,11],[49,15,19,11,"useEffect"],[49,24,19,11],[49,26,19,12],[49,32,19,18],[50,6,20,4],[51,6,21,4],[51,10,21,10,"unsubscribe"],[51,21,21,21],[51,24,21,24,"NetInfo"],[51,31,21,31],[51,32,21,31,"default"],[51,39,21,31],[51,40,21,32,"addEventListener"],[51,56,21,48],[51,57,21,50,"state"],[51,62,21,55],[51,66,21,60],[52,8,22,6,"setIsConnected"],[52,22,22,20],[52,23,22,21,"state"],[52,28,22,26],[52,29,22,27,"isConnected"],[52,40,22,38],[52,44,22,42],[52,49,22,47],[52,50,22,48],[54,8,24,6],[55,8,25,6],[55,12,25,10,"state"],[55,17,25,15],[55,18,25,16,"isConnected"],[55,29,25,27],[55,33,25,31],[55,34,25,32,"isConnected"],[55,45,25,43],[55,47,25,45],[56,10,26,8,"syncNow"],[56,17,26,15],[56,18,26,16],[56,19,26,17],[57,8,27,6],[58,6,28,4],[58,7,28,5],[58,8,28,6],[60,6,30,4],[61,6,31,4],[61,10,31,10,"syncInterval"],[61,22,31,22],[61,25,31,25,"syncService"],[61,45,31,36],[61,46,31,36,"syncService"],[61,57,31,36],[61,58,31,37,"startAutoSync"],[61,71,31,50],[61,72,31,51],[61,73,31,52],[61,74,31,53],[63,6,33,4],[64,6,34,4,"updatePendingCount"],[64,24,34,22],[64,25,34,23],[64,26,34,24],[65,6,35,4],[65,10,35,10,"countInterval"],[65,23,35,23],[65,26,35,26,"setInterval"],[65,37,35,37],[65,38,35,38,"updatePendingCount"],[65,56,35,56],[65,58,35,58],[65,63,35,63],[65,64,35,64],[65,65,35,65],[65,66,35,66],[67,6,37,4],[67,13,37,11],[67,19,37,17],[68,8,38,6,"unsubscribe"],[68,19,38,17],[68,20,38,18],[68,21,38,19],[69,8,39,6,"clearInterval"],[69,21,39,19],[69,22,39,20,"syncInterval"],[69,34,39,32],[69,35,39,33],[70,8,40,6,"clearInterval"],[70,21,40,19],[70,22,40,20,"countInterval"],[70,35,40,33],[70,36,40,34],[71,6,41,4],[71,7,41,5],[72,4,42,2],[72,5,42,3],[72,7,42,5],[72,9,42,7],[72,10,42,8],[73,4,44,2],[73,8,44,8,"updatePendingCount"],[73,26,44,26],[74,6,44,26],[74,10,44,26,"_ref2"],[74,15,44,26],[74,22,44,26,"_asyncToGenerator"],[74,39,44,26],[74,40,44,26,"default"],[74,47,44,26],[74,49,44,29],[74,62,44,41],[75,8,45,4],[75,12,45,10,"locations"],[75,21,45,19],[75,30,45,28,"storageService"],[75,46,45,42],[75,47,45,42,"storageService"],[75,61,45,42],[75,62,45,43,"getPendingLocations"],[75,81,45,62],[75,82,45,63],[75,83,45,64],[76,8,46,4],[76,12,46,10,"messages"],[76,20,46,18],[76,29,46,27,"storageService"],[76,45,46,41],[76,46,46,41,"storageService"],[76,60,46,41],[76,61,46,42,"getPendingMessages"],[76,79,46,60],[76,80,46,61],[76,81,46,62],[77,8,47,4],[77,12,47,10,"respondents"],[77,23,47,21],[77,32,47,30,"storageService"],[77,48,47,44],[77,49,47,44,"storageService"],[77,63,47,44],[77,64,47,45,"getPendingRespondents"],[77,85,47,66],[77,86,47,67],[77,87,47,68],[78,8,48,4,"setPendingSync"],[78,22,48,18],[78,23,48,19,"locations"],[78,32,48,28],[78,33,48,29,"length"],[78,39,48,35],[78,42,48,38,"messages"],[78,50,48,46],[78,51,48,47,"length"],[78,57,48,53],[78,60,48,56,"respondents"],[78,71,48,67],[78,72,48,68,"length"],[78,78,48,74],[78,79,48,75],[79,6,49,2],[79,7,49,3],[80,6,49,3],[80,22,44,8,"updatePendingCount"],[80,40,44,26,"updatePendingCount"],[80,41,44,26],[81,8,44,26],[81,15,44,26,"_ref2"],[81,20,44,26],[81,21,44,26,"apply"],[81,26,44,26],[81,33,44,26,"arguments"],[81,42,44,26],[82,6,44,26],[83,4,44,26],[83,7,49,3],[84,4,51,2],[84,8,51,8,"syncNow"],[84,15,51,15],[85,6,51,15],[85,10,51,15,"_ref3"],[85,15,51,15],[85,22,51,15,"_asyncToGenerator"],[85,39,51,15],[85,40,51,15,"default"],[85,47,51,15],[85,49,51,18],[85,62,51,30],[86,8,52,4],[86,14,52,10,"syncService"],[86,34,52,21],[86,35,52,21,"syncService"],[86,46,52,21],[86,47,52,22,"syncAll"],[86,54,52,29],[86,55,52,30],[86,56,52,31],[87,8,53,4],[87,14,53,10,"updatePendingCount"],[87,32,53,28],[87,33,53,29],[87,34,53,30],[88,6,54,2],[88,7,54,3],[89,6,54,3],[89,22,51,8,"syncNow"],[89,29,51,15,"syncNow"],[89,30,51,15],[90,8,51,15],[90,15,51,15,"_ref3"],[90,20,51,15],[90,21,51,15,"apply"],[90,26,51,15],[90,33,51,15,"arguments"],[90,42,51,15],[91,6,51,15],[92,4,51,15],[92,7,54,3],[93,4,56,2],[93,24,57,4],[93,28,57,4,"_reactJsxDevRuntime"],[93,47,57,4],[93,48,57,4,"jsxDEV"],[93,54,57,4],[93,56,57,5,"NetworkContext"],[93,70,57,19],[93,71,57,20,"Provider"],[93,79,57,28],[94,6,58,6,"value"],[94,11,58,11],[94,13,58,13],[95,8,59,8,"isConnected"],[95,19,59,19],[96,8,60,8,"isOnline"],[96,16,60,16],[96,18,60,18,"isConnected"],[96,29,60,29],[97,8,61,8,"pendingSync"],[97,19,61,19],[98,8,62,8,"syncNow"],[99,6,63,6],[99,7,63,8],[100,6,63,8,"children"],[100,14,63,8],[100,16,65,7,"children"],[101,4,65,15],[102,6,65,15,"fileName"],[102,14,65,15],[102,16,65,15,"_jsxFileName"],[102,28,65,15],[103,6,65,15,"lineNumber"],[103,16,65,15],[104,6,65,15,"columnNumber"],[104,18,65,15],[105,4,65,15],[105,11,66,29],[105,12,66,30],[106,2,68,0],[106,3,68,1],[107,2,68,2,"_s"],[107,4,68,2],[107,5,15,13,"NetworkProvider"],[107,20,15,28],[108,2,15,28,"_c"],[108,4,15,28],[108,7,15,13,"NetworkProvider"],[108,22,15,28],[109,2,70,7],[109,6,70,13,"useNetwork"],[109,16,70,23],[109,19,70,26,"useNetwork"],[109,20,70,26],[109,25,70,32],[110,4,70,32,"_s2"],[110,7,70,32],[111,4,71,2],[111,8,71,8,"context"],[111,15,71,15],[111,18,71,18],[111,22,71,18,"useContext"],[111,28,71,28],[111,29,71,28,"useContext"],[111,39,71,28],[111,41,71,29,"NetworkContext"],[111,55,71,43],[111,56,71,44],[112,4,72,2],[112,8,72,6,"context"],[112,15,72,13],[112,20,72,18,"undefined"],[112,29,72,27],[112,31,72,29],[113,6,73,4],[113,12,73,10],[113,16,73,14,"Error"],[113,21,73,19],[113,22,73,20],[113,72,73,70],[113,73,73,71],[114,4,74,2],[115,4,75,2],[115,11,75,9,"context"],[115,18,75,16],[116,2,76,0],[116,3,76,1],[117,2,76,2,"_s2"],[117,5,76,2],[117,6,70,13,"useNetwork"],[117,16,70,23],[118,2,70,23],[118,6,70,23,"_c"],[118,8,70,23],[119,2,70,23,"$RefreshReg$"],[119,14,70,23],[119,15,70,23,"_c"],[119,17,70,23],[120,0,70,23],[120,3]],"functionMap":{"names":["<global>","NetworkProvider","useEffect$argument_0","NetInfo.addEventListener$argument_0","<anonymous>","updatePendingCount","syncNow","useNetwork"],"mappings":"AAA;+BCc;YCI;iDCE;KDO;WES;KFI;GDC;6BIE;GJK;kBKE;GLG;CDc;0BOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}