{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":43,"index":98}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":63,"index":162}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"syncService\", {\n    enumerable: true,\n    get: function () {\n      return syncService;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[1], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _storage = require(_dependencyMap[2], \"./storage\");\n  var _api = require(_dependencyMap[3], \"./api\");\n  var syncService = {\n    syncAll: function () {\n      var _syncAll = (0, _asyncToGenerator.default)(function* () {\n        var netInfo = yield NetInfo.default.fetch();\n        if (!netInfo.isConnected) {\n          console.log('No internet connection, skipping sync');\n          return {\n            success: false,\n            message: 'No internet connection'\n          };\n        }\n        try {\n          // Sync locations\n          yield this.syncLocations();\n\n          // Sync messages\n          yield this.syncMessages();\n\n          // Sync respondents\n          yield this.syncRespondents();\n          return {\n            success: true,\n            message: 'All data synced successfully'\n          };\n        } catch (error) {\n          console.error('Sync error:', error);\n          return {\n            success: false,\n            message: 'Sync failed',\n            error: error\n          };\n        }\n      });\n      function syncAll() {\n        return _syncAll.apply(this, arguments);\n      }\n      return syncAll;\n    }(),\n    syncLocations: function () {\n      var _syncLocations = (0, _asyncToGenerator.default)(function* () {\n        var pendingLocations = yield _storage.storageService.getPendingLocations();\n        if (pendingLocations.length === 0) return;\n        console.log(`Syncing ${pendingLocations.length} locations`);\n        yield _api.locationAPI.createLocationsBatch(pendingLocations);\n        yield _storage.storageService.clearPendingLocations();\n      });\n      function syncLocations() {\n        return _syncLocations.apply(this, arguments);\n      }\n      return syncLocations;\n    }(),\n    syncMessages: function () {\n      var _syncMessages = (0, _asyncToGenerator.default)(function* () {\n        var pendingMessages = yield _storage.storageService.getPendingMessages();\n        if (pendingMessages.length === 0) return;\n        console.log(`Syncing ${pendingMessages.length} messages`);\n        yield _api.messageAPI.createMessagesBatch(pendingMessages);\n        yield _storage.storageService.clearPendingMessages();\n      });\n      function syncMessages() {\n        return _syncMessages.apply(this, arguments);\n      }\n      return syncMessages;\n    }(),\n    syncRespondents: function () {\n      var _syncRespondents = (0, _asyncToGenerator.default)(function* () {\n        var pendingRespondents = yield _storage.storageService.getPendingRespondents();\n        if (pendingRespondents.length === 0) return;\n        console.log(`Syncing ${pendingRespondents.length} respondents`);\n        for (var respondent of pendingRespondents) {\n          if (respondent.id) {\n            yield _api.respondentAPI.updateRespondent(respondent.id, respondent);\n          }\n        }\n        yield _storage.storageService.clearPendingRespondents();\n      });\n      function syncRespondents() {\n        return _syncRespondents.apply(this, arguments);\n      }\n      return syncRespondents;\n    }(),\n    startAutoSync: function startAutoSync() {\n      var _this = this;\n      var intervalMinutes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;\n      return setInterval(function () {\n        _this.syncAll();\n      }, intervalMinutes * 60 * 1000);\n    }\n  };\n});","lineCount":113,"map":[[12,2,5,0,"Object"],[12,8,5,0],[12,9,5,0,"defineProperty"],[12,23,5,0],[12,24,5,0,"exports"],[12,31,5,0],[13,4,5,0,"enumerable"],[13,14,5,0],[14,4,5,0,"get"],[14,7,5,0],[14,18,5,0,"get"],[14,19,5,0],[15,6,5,0],[15,13,5,0,"syncService"],[15,24,5,0],[16,4,5,0],[17,2,5,0],[18,2,76,2],[18,6,76,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,76,2],[18,45,76,2,"require"],[18,52,76,2],[18,53,76,2,"_dependencyMap"],[18,67,76,2],[19,2,76,2],[19,6,76,2,"_asyncToGenerator"],[19,23,76,2],[19,26,76,2,"_interopDefault"],[19,41,76,2],[19,42,76,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,76,2],[20,2,1,0],[20,6,1,0,"_reactNativeCommunityNetinfo"],[20,34,1,0],[20,37,1,0,"require"],[20,44,1,0],[20,45,1,0,"_dependencyMap"],[20,59,1,0],[21,2,1,0],[21,6,1,0,"NetInfo"],[21,13,1,0],[21,16,1,0,"_interopDefault"],[21,31,1,0],[21,32,1,0,"_reactNativeCommunityNetinfo"],[21,60,1,0],[22,2,2,0],[22,6,2,0,"_storage"],[22,14,2,0],[22,17,2,0,"require"],[22,24,2,0],[22,25,2,0,"_dependencyMap"],[22,39,2,0],[23,2,3,0],[23,6,3,0,"_api"],[23,10,3,0],[23,13,3,0,"require"],[23,20,3,0],[23,21,3,0,"_dependencyMap"],[23,35,3,0],[24,2,5,7],[24,6,5,13,"syncService"],[24,17,5,24],[24,20,5,27],[25,4,6,8,"syncAll"],[25,11,6,15],[26,6,6,15],[26,10,6,15,"_syncAll"],[26,18,6,15],[26,25,6,15,"_asyncToGenerator"],[26,42,6,15],[26,43,6,15,"default"],[26,50,6,15],[26,65,6,18],[27,8,7,4],[27,12,7,10,"netInfo"],[27,19,7,17],[27,28,7,26,"NetInfo"],[27,35,7,33],[27,36,7,33,"default"],[27,43,7,33],[27,44,7,34,"fetch"],[27,49,7,39],[27,50,7,40],[27,51,7,41],[28,8,8,4],[28,12,8,8],[28,13,8,9,"netInfo"],[28,20,8,16],[28,21,8,17,"isConnected"],[28,32,8,28],[28,34,8,30],[29,10,9,6,"console"],[29,17,9,13],[29,18,9,14,"log"],[29,21,9,17],[29,22,9,18],[29,61,9,57],[29,62,9,58],[30,10,10,6],[30,17,10,13],[31,12,11,8,"success"],[31,19,11,15],[31,21,11,17],[31,26,11,22],[32,12,12,8,"message"],[32,19,12,15],[32,21,12,17],[33,10,13,6],[33,11,13,7],[34,8,14,4],[35,8,16,4],[35,12,16,8],[36,10,17,6],[37,10,18,6],[37,16,18,12],[37,20,18,16],[37,21,18,17,"syncLocations"],[37,34,18,30],[37,35,18,31],[37,36,18,32],[39,10,20,6],[40,10,21,6],[40,16,21,12],[40,20,21,16],[40,21,21,17,"syncMessages"],[40,33,21,29],[40,34,21,30],[40,35,21,31],[42,10,23,6],[43,10,24,6],[43,16,24,12],[43,20,24,16],[43,21,24,17,"syncRespondents"],[43,36,24,32],[43,37,24,33],[43,38,24,34],[44,10,26,6],[44,17,26,13],[45,12,27,8,"success"],[45,19,27,15],[45,21,27,17],[45,25,27,21],[46,12,28,8,"message"],[46,19,28,15],[46,21,28,17],[47,10,29,6],[47,11,29,7],[48,8,30,4],[48,9,30,5],[48,10,30,6],[48,17,30,13,"error"],[48,22,30,18],[48,24,30,20],[49,10,31,6,"console"],[49,17,31,13],[49,18,31,14,"error"],[49,23,31,19],[49,24,31,20],[49,37,31,33],[49,39,31,35,"error"],[49,44,31,40],[49,45,31,41],[50,10,32,6],[50,17,32,13],[51,12,33,8,"success"],[51,19,33,15],[51,21,33,17],[51,26,33,22],[52,12,34,8,"message"],[52,19,34,15],[52,21,34,17],[52,34,34,30],[53,12,35,8,"error"],[53,17,35,13],[53,19,35,8,"error"],[54,10,36,6],[54,11,36,7],[55,8,37,4],[56,6,38,2],[56,7,38,3],[57,6,38,3],[57,15,6,8,"syncAll"],[57,22,6,15,"syncAll"],[57,23,6,15],[58,8,6,15],[58,15,6,15,"_syncAll"],[58,23,6,15],[58,24,6,15,"apply"],[58,29,6,15],[58,36,6,15,"arguments"],[58,45,6,15],[59,6,6,15],[60,6,6,15],[60,13,6,8,"syncAll"],[60,20,6,15],[61,4,6,15],[62,4,40,8,"syncLocations"],[62,17,40,21],[63,6,40,21],[63,10,40,21,"_syncLocations"],[63,24,40,21],[63,31,40,21,"_asyncToGenerator"],[63,48,40,21],[63,49,40,21,"default"],[63,56,40,21],[63,71,40,24],[64,8,41,4],[64,12,41,10,"pendingLocations"],[64,28,41,26],[64,37,41,35,"storageService"],[64,45,41,49],[64,46,41,49,"storageService"],[64,60,41,49],[64,61,41,50,"getPendingLocations"],[64,80,41,69],[64,81,41,70],[64,82,41,71],[65,8,42,4],[65,12,42,8,"pendingLocations"],[65,28,42,24],[65,29,42,25,"length"],[65,35,42,31],[65,40,42,36],[65,41,42,37],[65,43,42,39],[66,8,44,4,"console"],[66,15,44,11],[66,16,44,12,"log"],[66,19,44,15],[66,20,44,16],[66,31,44,27,"pendingLocations"],[66,47,44,43],[66,48,44,44,"length"],[66,54,44,50],[66,66,44,62],[66,67,44,63],[67,8,45,4],[67,14,45,10,"locationAPI"],[67,18,45,21],[67,19,45,21,"locationAPI"],[67,30,45,21],[67,31,45,22,"createLocationsBatch"],[67,51,45,42],[67,52,45,43,"pendingLocations"],[67,68,45,59],[67,69,45,60],[68,8,46,4],[68,14,46,10,"storageService"],[68,22,46,24],[68,23,46,24,"storageService"],[68,37,46,24],[68,38,46,25,"clearPendingLocations"],[68,59,46,46],[68,60,46,47],[68,61,46,48],[69,6,47,2],[69,7,47,3],[70,6,47,3],[70,15,40,8,"syncLocations"],[70,28,40,21,"syncLocations"],[70,29,40,21],[71,8,40,21],[71,15,40,21,"_syncLocations"],[71,29,40,21],[71,30,40,21,"apply"],[71,35,40,21],[71,42,40,21,"arguments"],[71,51,40,21],[72,6,40,21],[73,6,40,21],[73,13,40,8,"syncLocations"],[73,26,40,21],[74,4,40,21],[75,4,49,8,"syncMessages"],[75,16,49,20],[76,6,49,20],[76,10,49,20,"_syncMessages"],[76,23,49,20],[76,30,49,20,"_asyncToGenerator"],[76,47,49,20],[76,48,49,20,"default"],[76,55,49,20],[76,70,49,23],[77,8,50,4],[77,12,50,10,"pendingMessages"],[77,27,50,25],[77,36,50,34,"storageService"],[77,44,50,48],[77,45,50,48,"storageService"],[77,59,50,48],[77,60,50,49,"getPendingMessages"],[77,78,50,67],[77,79,50,68],[77,80,50,69],[78,8,51,4],[78,12,51,8,"pendingMessages"],[78,27,51,23],[78,28,51,24,"length"],[78,34,51,30],[78,39,51,35],[78,40,51,36],[78,42,51,38],[79,8,53,4,"console"],[79,15,53,11],[79,16,53,12,"log"],[79,19,53,15],[79,20,53,16],[79,31,53,27,"pendingMessages"],[79,46,53,42],[79,47,53,43,"length"],[79,53,53,49],[79,64,53,60],[79,65,53,61],[80,8,54,4],[80,14,54,10,"messageAPI"],[80,18,54,20],[80,19,54,20,"messageAPI"],[80,29,54,20],[80,30,54,21,"createMessagesBatch"],[80,49,54,40],[80,50,54,41,"pendingMessages"],[80,65,54,56],[80,66,54,57],[81,8,55,4],[81,14,55,10,"storageService"],[81,22,55,24],[81,23,55,24,"storageService"],[81,37,55,24],[81,38,55,25,"clearPendingMessages"],[81,58,55,45],[81,59,55,46],[81,60,55,47],[82,6,56,2],[82,7,56,3],[83,6,56,3],[83,15,49,8,"syncMessages"],[83,27,49,20,"syncMessages"],[83,28,49,20],[84,8,49,20],[84,15,49,20,"_syncMessages"],[84,28,49,20],[84,29,49,20,"apply"],[84,34,49,20],[84,41,49,20,"arguments"],[84,50,49,20],[85,6,49,20],[86,6,49,20],[86,13,49,8,"syncMessages"],[86,25,49,20],[87,4,49,20],[88,4,58,8,"syncRespondents"],[88,19,58,23],[89,6,58,23],[89,10,58,23,"_syncRespondents"],[89,26,58,23],[89,33,58,23,"_asyncToGenerator"],[89,50,58,23],[89,51,58,23,"default"],[89,58,58,23],[89,73,58,26],[90,8,59,4],[90,12,59,10,"pendingRespondents"],[90,30,59,28],[90,39,59,37,"storageService"],[90,47,59,51],[90,48,59,51,"storageService"],[90,62,59,51],[90,63,59,52,"getPendingRespondents"],[90,84,59,73],[90,85,59,74],[90,86,59,75],[91,8,60,4],[91,12,60,8,"pendingRespondents"],[91,30,60,26],[91,31,60,27,"length"],[91,37,60,33],[91,42,60,38],[91,43,60,39],[91,45,60,41],[92,8,62,4,"console"],[92,15,62,11],[92,16,62,12,"log"],[92,19,62,15],[92,20,62,16],[92,31,62,27,"pendingRespondents"],[92,49,62,45],[92,50,62,46,"length"],[92,56,62,52],[92,70,62,66],[92,71,62,67],[93,8,63,4],[93,13,63,9],[93,17,63,15,"respondent"],[93,27,63,25],[93,31,63,29,"pendingRespondents"],[93,49,63,47],[93,51,63,49],[94,10,64,6],[94,14,64,10,"respondent"],[94,24,64,20],[94,25,64,21,"id"],[94,27,64,23],[94,29,64,25],[95,12,65,8],[95,18,65,14,"respondentAPI"],[95,22,65,27],[95,23,65,27,"respondentAPI"],[95,36,65,27],[95,37,65,28,"updateRespondent"],[95,53,65,44],[95,54,65,45,"respondent"],[95,64,65,55],[95,65,65,56,"id"],[95,67,65,58],[95,69,65,60,"respondent"],[95,79,65,70],[95,80,65,71],[96,10,66,6],[97,8,67,4],[98,8,68,4],[98,14,68,10,"storageService"],[98,22,68,24],[98,23,68,24,"storageService"],[98,37,68,24],[98,38,68,25,"clearPendingRespondents"],[98,61,68,48],[98,62,68,49],[98,63,68,50],[99,6,69,2],[99,7,69,3],[100,6,69,3],[100,15,58,8,"syncRespondents"],[100,30,58,23,"syncRespondents"],[100,31,58,23],[101,8,58,23],[101,15,58,23,"_syncRespondents"],[101,31,58,23],[101,32,58,23,"apply"],[101,37,58,23],[101,44,58,23,"arguments"],[101,53,58,23],[102,6,58,23],[103,6,58,23],[103,13,58,8,"syncRespondents"],[103,28,58,23],[104,4,58,23],[105,4,71,2,"startAutoSync"],[105,17,71,15],[105,28,71,2,"startAutoSync"],[105,41,71,15,"startAutoSync"],[105,42,71,15],[105,44,71,45],[106,6,71,45],[106,10,71,45,"_this"],[106,15,71,45],[107,6,71,45],[107,10,71,16,"intervalMinutes"],[107,25,71,39],[107,28,71,39,"arguments"],[107,37,71,39],[107,38,71,39,"length"],[107,44,71,39],[107,52,71,39,"arguments"],[107,61,71,39],[107,69,71,39,"undefined"],[107,78,71,39],[107,81,71,39,"arguments"],[107,90,71,39],[107,96,71,42],[107,97,71,43],[108,6,72,4],[108,13,72,11,"setInterval"],[108,24,72,22],[108,25,72,23],[108,37,72,29],[109,8,73,6,"_this"],[109,13,73,10],[109,14,73,11,"syncAll"],[109,21,73,18],[109,22,73,19],[109,23,73,20],[110,6,74,4],[110,7,74,5],[110,9,74,7,"intervalMinutes"],[110,24,74,22],[110,27,74,25],[110,29,74,27],[110,32,74,30],[110,36,74,34],[110,37,74,35],[111,4,75,2],[112,2,76,0],[112,3,76,1],[113,0,76,2],[113,3]],"functionMap":{"names":["<global>","syncAll","syncLocations","syncMessages","syncRespondents","startAutoSync","setInterval$argument_0"],"mappings":"AAA;ECK;GDgC;EEE;GFO;EGE;GHO;EIE;GJW;EKE;uBCC;KDE;GLC"},"hasCjsExports":false},"type":"js/module"}]}