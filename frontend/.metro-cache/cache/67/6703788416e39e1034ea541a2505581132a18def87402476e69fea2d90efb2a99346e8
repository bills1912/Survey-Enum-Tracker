{"dependencies":[{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":56},"end":{"line":2,"column":43,"index":99}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":101},"end":{"line":3,"column":63,"index":164}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"syncService\",{enumerable:!0,get:function(){return o}});var e,n=r(d[0]),s=(e=n)&&e.__esModule?e:{default:e},t=r(d[1]),c=r(d[2]);const o={async syncAll(){if(!(await s.default.fetch()).isConnected)return console.log('No internet connection, skipping sync'),{success:!1,message:'No internet connection'};try{return await this.syncLocations(),await this.syncMessages(),await this.syncRespondents(),{success:!0,message:'All data synced successfully'}}catch(e){return console.error('Sync error:',e),{success:!1,message:'Sync failed',error:e}}},async syncLocations(){const e=await t.storageService.getPendingLocations();0!==e.length&&(console.log(`Syncing ${e.length} locations`),await c.locationAPI.createLocationsBatch(e),await t.storageService.clearPendingLocations())},async syncMessages(){const e=await t.storageService.getPendingMessages();0!==e.length&&(console.log(`Syncing ${e.length} messages`),await c.messageAPI.createMessagesBatch(e),await t.storageService.clearPendingMessages())},async syncRespondents(){const e=await t.storageService.getPendingRespondents();if(0!==e.length){console.log(`Syncing ${e.length} respondents`);for(const n of e)n.id&&await c.respondentAPI.updateRespondent(n.id,n);await t.storageService.clearPendingRespondents()}},startAutoSync(e=2){return setInterval(()=>{this.syncAll()},60*e*1e3)}}});","lineCount":1,"map":[[1,92,5,0,"Object"],[1,99,5,0,"defineProperty"],[1,114,5,0,"_e"],[1,117,5,0],[1,132,5,0,"enumerable"],[1,144,5,0],[1,146,5,0,"get"],[1,150,5,0],[1,168,5,0,"syncService"],[1,169,5,0],[1,173,1,0],[1,177],[1,179,1,0,"_reactNativeCommunityNetinfo"],[1,181,1,0,"r"],[1,183,1,0,"d"],[1,185,1,0],[1,189,1,0,"NetInfo"],[1,192],[1,194,1,0,"_reactNativeCommunityNetinfo"],[1,198],[1,225,2,0,"_storage"],[1,227,2,0,"r"],[1,229,2,0,"d"],[1,231,2,0],[1,235,3,0,"_api"],[1,237,3,0,"r"],[1,239,3,0,"d"],[1,241,3,0],[1,245,5,7],[1,251,5,13,"syncService"],[1,253,5,27],[1,254,6,2],[1,267,6,8,"syncAll"],[1,270,8,4],[1,281,7,26,"NetInfo"],[1,283,7,33,"default"],[1,291,7,34,"fetch"],[1,300,8,17,"isConnected"],[1,312,10,6],[1,319,9,6,"console"],[1,327,9,14,"log"],[1,331,9,18],[1,372,10,13],[1,373,11,8,"success"],[1,382,11,17],[1,384,12,8,"message"],[1,392,12,17],[1,418,16,4],[1,422,26,6],[1,435,18,12,"this"],[1,440,18,17,"syncLocations"],[1,462,21,12,"this"],[1,467,21,17,"syncMessages"],[1,488,24,12,"this"],[1,493,24,17,"syncRespondents"],[1,511,26,13],[1,512,27,8,"success"],[1,521,27,17],[1,523,28,8,"message"],[1,531,28,17],[1,562,30,4],[1,563,30,6],[1,569,30,13,"error"],[1,572,32,6],[1,579,31,6,"console"],[1,587,31,14,"error"],[1,593,31,20],[1,607,31,35,"error"],[1,610,32,13],[1,611,33,8,"success"],[1,620,33,17],[1,622,34,8,"message"],[1,630,34,17],[1,644,35,8,"error"],[1,652,37,4],[1,653,38,2],[1,655,40,2],[1,674,40,8,"syncLocations"],[1,677,41,4],[1,683,41,10,"pendingLocations"],[1,691,41,35,"storageService"],[1,693,41,49,"storageService"],[1,708,41,50,"getPendingLocations"],[1,730,42,36],[1,734,42,8,"pendingLocations"],[1,736,42,25,"length"],[1,745,44,4,"console"],[1,753,44,12,"log"],[1,757,44,16],[1,768,44,27,"pendingLocations"],[1,770,44,44,"length"],[1,796,45,10,"locationAPI"],[1,798,45,21,"locationAPI"],[1,810,45,22,"createLocationsBatch"],[1,831,45,43,"pendingLocations"],[1,840,46,10,"storageService"],[1,842,46,24,"storageService"],[1,857,46,25,"clearPendingLocations"],[1,881,47,2],[1,883,49,2],[1,901,49,8,"syncMessages"],[1,904,50,4],[1,910,50,10,"pendingMessages"],[1,918,50,34,"storageService"],[1,920,50,48,"storageService"],[1,935,50,49,"getPendingMessages"],[1,956,51,35],[1,960,51,8,"pendingMessages"],[1,962,51,24,"length"],[1,971,53,4,"console"],[1,979,53,12,"log"],[1,983,53,16],[1,994,53,27,"pendingMessages"],[1,996,53,43,"length"],[1,1021,54,10,"messageAPI"],[1,1023,54,20,"messageAPI"],[1,1034,54,21,"createMessagesBatch"],[1,1054,54,41,"pendingMessages"],[1,1063,55,10,"storageService"],[1,1065,55,24,"storageService"],[1,1080,55,25,"clearPendingMessages"],[1,1103,56,2],[1,1105,58,2],[1,1126,58,8,"syncRespondents"],[1,1129,59,4],[1,1135,59,10,"pendingRespondents"],[1,1143,59,37,"storageService"],[1,1145,59,51,"storageService"],[1,1160,59,52,"getPendingRespondents"],[1,1184,60,4],[1,1187,60,38],[1,1191,60,8,"pendingRespondents"],[1,1193,60,27,"length"],[1,1200,60,4],[1,1201,62,4,"console"],[1,1209,62,12,"log"],[1,1213,62,16],[1,1224,62,27,"pendingRespondents"],[1,1226,62,46,"length"],[1,1248,63,4],[1,1252,63,9],[1,1258,63,15,"respondent"],[1,1263,63,29,"pendingRespondents"],[1,1265,64,10,"respondent"],[1,1267,64,21,"id"],[1,1277,65,14,"respondentAPI"],[1,1279,65,27,"respondentAPI"],[1,1293,65,28,"updateRespondent"],[1,1310,65,45,"respondent"],[1,1312,65,56,"id"],[1,1315,65,60,"respondent"],[1,1324,68,10,"storageService"],[1,1326,68,24,"storageService"],[1,1341,68,25,"clearPendingRespondents"],[1,1366,60,41],[1,1367,69,2],[1,1369,71,2,"startAutoSync"],[1,1383,71,16,"intervalMinutes"],[1,1385,71,42],[1,1388,72,4],[1,1395,72,11,"setInterval"],[1,1407,72,23],[1,1412,73,6,"this"],[1,1417,73,11,"syncAll"],[1,1428,74,25],[1,1431,74,7,"intervalMinutes"],[1,1433,74,30],[1,1437,75,2],[1,1439,76,2],[1,1442]],"functionMap":{"names":["<global>","syncAll","syncLocations","syncMessages","syncRespondents","startAutoSync","setInterval$argument_0"],"mappings":"AAA;ECK;GDgC;EEE;GFO;EGE;GHO;EIE;GJW;EKE;uBCC;KDE;GLC"},"hasCjsExports":false},"type":"js/module"}]}