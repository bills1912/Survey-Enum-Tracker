{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":54,"index":144}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"../services/syncService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":145},"end":{"line":3,"column":54,"index":199}}],"key":"joJd5R6pPIG9/TZe5fTFFjaC2zk=","exportNames":["*"],"imports":1}},{"name":"../services/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":200},"end":{"line":4,"column":53,"index":253}}],"key":"zqGJUMQQZwIry90rqgd1gunX3aI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/NetworkContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"NetworkProvider\", {\n    enumerable: true,\n    get: function () {\n      return NetworkProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useNetwork\", {\n    enumerable: true,\n    get: function () {\n      return useNetwork;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[1], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _servicesSyncService = require(_dependencyMap[2], \"../services/syncService\");\n  var _servicesStorage = require(_dependencyMap[3], \"../services/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const NetworkContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const NetworkProvider = ({\n    children\n  }) => {\n    _s();\n    const [isConnected, setIsConnected] = (0, _react.useState)(true);\n    const [pendingSync, setPendingSync] = (0, _react.useState)(0);\n    (0, _react.useEffect)(() => {\n      // Listen to network changes\n      const unsubscribe = NetInfo.default.addEventListener(state => {\n        setIsConnected(state.isConnected ?? false);\n\n        // Auto-sync when coming online\n        if (state.isConnected && !isConnected) {\n          syncNow();\n        }\n      });\n\n      // Start auto-sync\n      const syncInterval = _servicesSyncService.syncService.startAutoSync(2);\n\n      // Update pending count\n      updatePendingCount();\n      const countInterval = setInterval(updatePendingCount, 30000); // Check every 30s\n\n      return () => {\n        unsubscribe();\n        clearInterval(syncInterval);\n        clearInterval(countInterval);\n      };\n    }, []);\n    const updatePendingCount = async () => {\n      const locations = await _servicesStorage.storageService.getPendingLocations();\n      const messages = await _servicesStorage.storageService.getPendingMessages();\n      const respondents = await _servicesStorage.storageService.getPendingRespondents();\n      setPendingSync(locations.length + messages.length + respondents.length);\n    };\n    const syncNow = async () => {\n      await _servicesSyncService.syncService.syncAll();\n      await updatePendingCount();\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NetworkContext.Provider, {\n      value: {\n        isConnected,\n        isOnline: isConnected,\n        pendingSync,\n        syncNow\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this);\n  };\n  _s(NetworkProvider, \"Y6Uj6N/AEft8z+RFOY/JntmLl2g=\");\n  _c = NetworkProvider;\n  const useNetwork = () => {\n    _s2();\n    const context = (0, _react.useContext)(NetworkContext);\n    if (context === undefined) {\n      throw new Error('useNetwork must be used within a NetworkProvider');\n    }\n    return context;\n  };\n  _s2(useNetwork, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"NetworkProvider\");\n});","lineCount":101,"map":[[15,2,15,0,"Object"],[15,8,15,0],[15,9,15,0,"defineProperty"],[15,23,15,0],[15,24,15,0,"exports"],[15,31,15,0],[16,4,15,0,"enumerable"],[16,14,15,0],[17,4,15,0,"get"],[17,7,15,0],[17,18,15,0,"get"],[17,19,15,0],[18,6,15,0],[18,13,15,0,"NetworkProvider"],[18,28,15,0],[19,4,15,0],[20,2,15,0],[21,2,70,0,"Object"],[21,8,70,0],[21,9,70,0,"defineProperty"],[21,23,70,0],[21,24,70,0,"exports"],[21,31,70,0],[22,4,70,0,"enumerable"],[22,14,70,0],[23,4,70,0,"get"],[23,7,70,0],[23,18,70,0,"get"],[23,19,70,0],[24,6,70,0],[24,13,70,0,"useNetwork"],[24,23,70,0],[25,4,70,0],[26,2,70,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeCommunityNetinfo"],[28,34,2,0],[28,37,2,0,"require"],[28,44,2,0],[28,45,2,0,"_dependencyMap"],[28,59,2,0],[29,2,2,0],[29,6,2,0,"NetInfo"],[29,13,2,0],[29,16,2,0,"_interopDefault"],[29,31,2,0],[29,32,2,0,"_reactNativeCommunityNetinfo"],[29,60,2,0],[30,2,3,0],[30,6,3,0,"_servicesSyncService"],[30,26,3,0],[30,29,3,0,"require"],[30,36,3,0],[30,37,3,0,"_dependencyMap"],[30,51,3,0],[31,2,4,0],[31,6,4,0,"_servicesStorage"],[31,22,4,0],[31,25,4,0,"require"],[31,32,4,0],[31,33,4,0,"_dependencyMap"],[31,47,4,0],[32,2,4,53],[32,6,4,53,"_reactJsxDevRuntime"],[32,25,4,53],[32,28,4,53,"require"],[32,35,4,53],[32,36,4,53,"_dependencyMap"],[32,50,4,53],[33,2,13,0],[33,8,13,6,"NetworkContext"],[33,22,13,20],[33,38,13,23],[33,42,13,23,"createContext"],[33,48,13,36],[33,49,13,36,"createContext"],[33,62,13,36],[33,64,13,69,"undefined"],[33,73,13,78],[33,74,13,79],[34,2,15,7],[34,8,15,13,"NetworkProvider"],[34,23,15,28],[34,26,15,31,"NetworkProvider"],[34,27,15,32],[35,4,15,34,"children"],[36,2,15,68],[36,3,15,69],[36,8,15,74],[37,4,15,74,"_s"],[37,6,15,74],[38,4,16,2],[38,10,16,8],[38,11,16,9,"isConnected"],[38,22,16,20],[38,24,16,22,"setIsConnected"],[38,38,16,36],[38,39,16,37],[38,42,16,40],[38,46,16,40,"useState"],[38,52,16,48],[38,53,16,48,"useState"],[38,61,16,48],[38,63,16,49],[38,67,16,53],[38,68,16,54],[39,4,17,2],[39,10,17,8],[39,11,17,9,"pendingSync"],[39,22,17,20],[39,24,17,22,"setPendingSync"],[39,38,17,36],[39,39,17,37],[39,42,17,40],[39,46,17,40,"useState"],[39,52,17,48],[39,53,17,48,"useState"],[39,61,17,48],[39,63,17,49],[39,64,17,50],[39,65,17,51],[40,4,19,2],[40,8,19,2,"useEffect"],[40,14,19,11],[40,15,19,11,"useEffect"],[40,24,19,11],[40,26,19,12],[40,32,19,18],[41,6,20,4],[42,6,21,4],[42,12,21,10,"unsubscribe"],[42,23,21,21],[42,26,21,24,"NetInfo"],[42,33,21,31],[42,34,21,31,"default"],[42,41,21,31],[42,42,21,32,"addEventListener"],[42,58,21,48],[42,59,21,50,"state"],[42,64,21,55],[42,68,21,60],[43,8,22,6,"setIsConnected"],[43,22,22,20],[43,23,22,21,"state"],[43,28,22,26],[43,29,22,27,"isConnected"],[43,40,22,38],[43,44,22,42],[43,49,22,47],[43,50,22,48],[45,8,24,6],[46,8,25,6],[46,12,25,10,"state"],[46,17,25,15],[46,18,25,16,"isConnected"],[46,29,25,27],[46,33,25,31],[46,34,25,32,"isConnected"],[46,45,25,43],[46,47,25,45],[47,10,26,8,"syncNow"],[47,17,26,15],[47,18,26,16],[47,19,26,17],[48,8,27,6],[49,6,28,4],[49,7,28,5],[49,8,28,6],[51,6,30,4],[52,6,31,4],[52,12,31,10,"syncInterval"],[52,24,31,22],[52,27,31,25,"syncService"],[52,47,31,36],[52,48,31,36,"syncService"],[52,59,31,36],[52,60,31,37,"startAutoSync"],[52,73,31,50],[52,74,31,51],[52,75,31,52],[52,76,31,53],[54,6,33,4],[55,6,34,4,"updatePendingCount"],[55,24,34,22],[55,25,34,23],[55,26,34,24],[56,6,35,4],[56,12,35,10,"countInterval"],[56,25,35,23],[56,28,35,26,"setInterval"],[56,39,35,37],[56,40,35,38,"updatePendingCount"],[56,58,35,56],[56,60,35,58],[56,65,35,63],[56,66,35,64],[56,67,35,65],[56,68,35,66],[58,6,37,4],[58,13,37,11],[58,19,37,17],[59,8,38,6,"unsubscribe"],[59,19,38,17],[59,20,38,18],[59,21,38,19],[60,8,39,6,"clearInterval"],[60,21,39,19],[60,22,39,20,"syncInterval"],[60,34,39,32],[60,35,39,33],[61,8,40,6,"clearInterval"],[61,21,40,19],[61,22,40,20,"countInterval"],[61,35,40,33],[61,36,40,34],[62,6,41,4],[62,7,41,5],[63,4,42,2],[63,5,42,3],[63,7,42,5],[63,9,42,7],[63,10,42,8],[64,4,44,2],[64,10,44,8,"updatePendingCount"],[64,28,44,26],[64,31,44,29],[64,37,44,29,"updatePendingCount"],[64,38,44,29],[64,43,44,41],[65,6,45,4],[65,12,45,10,"locations"],[65,21,45,19],[65,24,45,22],[65,30,45,28,"storageService"],[65,46,45,42],[65,47,45,42,"storageService"],[65,61,45,42],[65,62,45,43,"getPendingLocations"],[65,81,45,62],[65,82,45,63],[65,83,45,64],[66,6,46,4],[66,12,46,10,"messages"],[66,20,46,18],[66,23,46,21],[66,29,46,27,"storageService"],[66,45,46,41],[66,46,46,41,"storageService"],[66,60,46,41],[66,61,46,42,"getPendingMessages"],[66,79,46,60],[66,80,46,61],[66,81,46,62],[67,6,47,4],[67,12,47,10,"respondents"],[67,23,47,21],[67,26,47,24],[67,32,47,30,"storageService"],[67,48,47,44],[67,49,47,44,"storageService"],[67,63,47,44],[67,64,47,45,"getPendingRespondents"],[67,85,47,66],[67,86,47,67],[67,87,47,68],[68,6,48,4,"setPendingSync"],[68,20,48,18],[68,21,48,19,"locations"],[68,30,48,28],[68,31,48,29,"length"],[68,37,48,35],[68,40,48,38,"messages"],[68,48,48,46],[68,49,48,47,"length"],[68,55,48,53],[68,58,48,56,"respondents"],[68,69,48,67],[68,70,48,68,"length"],[68,76,48,74],[68,77,48,75],[69,4,49,2],[69,5,49,3],[70,4,51,2],[70,10,51,8,"syncNow"],[70,17,51,15],[70,20,51,18],[70,26,51,18,"syncNow"],[70,27,51,18],[70,32,51,30],[71,6,52,4],[71,12,52,10,"syncService"],[71,32,52,21],[71,33,52,21,"syncService"],[71,44,52,21],[71,45,52,22,"syncAll"],[71,52,52,29],[71,53,52,30],[71,54,52,31],[72,6,53,4],[72,12,53,10,"updatePendingCount"],[72,30,53,28],[72,31,53,29],[72,32,53,30],[73,4,54,2],[73,5,54,3],[74,4,56,2],[74,24,57,4],[74,28,57,4,"_reactJsxDevRuntime"],[74,47,57,4],[74,48,57,4,"jsxDEV"],[74,54,57,4],[74,56,57,5,"NetworkContext"],[74,70,57,19],[74,71,57,20,"Provider"],[74,79,57,28],[75,6,58,6,"value"],[75,11,58,11],[75,13,58,13],[76,8,59,8,"isConnected"],[76,19,59,19],[77,8,60,8,"isOnline"],[77,16,60,16],[77,18,60,18,"isConnected"],[77,29,60,29],[78,8,61,8,"pendingSync"],[78,19,61,19],[79,8,62,8,"syncNow"],[80,6,63,6],[80,7,63,8],[81,6,63,8,"children"],[81,14,63,8],[81,16,65,7,"children"],[82,4,65,15],[83,6,65,15,"fileName"],[83,14,65,15],[83,16,65,15,"_jsxFileName"],[83,28,65,15],[84,6,65,15,"lineNumber"],[84,16,65,15],[85,6,65,15,"columnNumber"],[85,18,65,15],[86,4,65,15],[86,11,66,29],[86,12,66,30],[87,2,68,0],[87,3,68,1],[88,2,68,2,"_s"],[88,4,68,2],[88,5,15,13,"NetworkProvider"],[88,20,15,28],[89,2,15,28,"_c"],[89,4,15,28],[89,7,15,13,"NetworkProvider"],[89,22,15,28],[90,2,70,7],[90,8,70,13,"useNetwork"],[90,18,70,23],[90,21,70,26,"useNetwork"],[90,22,70,26],[90,27,70,32],[91,4,70,32,"_s2"],[91,7,70,32],[92,4,71,2],[92,10,71,8,"context"],[92,17,71,15],[92,20,71,18],[92,24,71,18,"useContext"],[92,30,71,28],[92,31,71,28,"useContext"],[92,41,71,28],[92,43,71,29,"NetworkContext"],[92,57,71,43],[92,58,71,44],[93,4,72,2],[93,8,72,6,"context"],[93,15,72,13],[93,20,72,18,"undefined"],[93,29,72,27],[93,31,72,29],[94,6,73,4],[94,12,73,10],[94,16,73,14,"Error"],[94,21,73,19],[94,22,73,20],[94,72,73,70],[94,73,73,71],[95,4,74,2],[96,4,75,2],[96,11,75,9,"context"],[96,18,75,16],[97,2,76,0],[97,3,76,1],[98,2,76,2,"_s2"],[98,5,76,2],[98,6,70,13,"useNetwork"],[98,16,70,23],[99,2,70,23],[99,6,70,23,"_c"],[99,8,70,23],[100,2,70,23,"$RefreshReg$"],[100,14,70,23],[100,15,70,23,"_c"],[100,17,70,23],[101,0,70,23],[101,3]],"functionMap":{"names":["<global>","NetworkProvider","useEffect$argument_0","NetInfo.addEventListener$argument_0","<anonymous>","updatePendingCount","syncNow","useNetwork"],"mappings":"AAA;+BCc;YCI;iDCE;KDO;WES;KFI;GDC;6BIE;GJK;kBKE;GLG;CDc;0BOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}